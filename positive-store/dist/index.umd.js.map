{"version":3,"file":"index.umd.js","sources":["../src/types/settings.ts","../src/providers/LanguageProvider/content.ts","../src/types/api.ts","../src/models/group/requests.ts","../src/providers/LanguageProvider/createLanguageContent.ts","../src/api/client.ts","../src/types/group.ts","../src/utils/formatName.ts","../src/models/user/helpers.ts","../src/models/membership/helpers.ts","../src/models/invitation/helpers.ts","../src/types/status.ts","../src/models/group/helpers.ts","../src/types/request.ts","../src/models/group/state.ts","../src/models/group/actions.ts","../src/models/group/thunks.ts","../src/api/paths.ts","../src/models/group/listeners.ts","../src/models/audience/requests.ts","../src/models/group/model.ts","../src/models/settings/state.ts","../src/models/settings/actions.ts","../src/models/settings/listeners.ts","../src/models/settings/model.ts","../src/models/audience/actions.ts","../src/models/audience/listeners.ts","../src/models/audience/helpers.ts","../src/utils/findItemInArray.ts","../src/models/audience/state.ts","../src/models/audience/thunks.ts","../src/models/audience/model.ts","../src/models/auth/actions.ts","../src/models/auth/listeners.ts","../src/models/auth/requests.ts","../src/models/exercise/requests.ts","../src/types/exercise.ts","../src/models/auth/state.ts","../src/models/auth/model.ts","../src/models/auth/thunks.ts","../src/models/exercise/actions.ts","../src/models/exercise/listeners.ts","../src/models/goal/requests.ts","../src/utils/isDraftID.ts","../src/models/exercise/state.ts","../src/models/exercise/helpers.ts","../src/models/exercise/thunks.ts","../src/models/exercise/model.ts","../src/models/goal/actions.ts","../src/models/goal/listeners.ts","../src/models/goal/state.ts","../src/models/goal/helpers.ts","../src/models/goal/model.ts","../src/models/invitation/requests.ts","../src/models/goal/thunks.ts","../src/models/invitation/actions.ts","../src/models/invitation/listeners.ts","../src/models/invitation/state.ts","../src/models/invitation/thunks.ts","../src/models/invitation/model.ts","../src/models/membership/requests.ts","../src/models/membership/actions.ts","../src/models/membership/listeners.ts","../src/models/membership/state.ts","../src/models/membership/thunks.ts","../src/models/membership/model.ts","../src/models/moment/requests.ts","../src/models/moment/actions.ts","../src/models/moment/listeners.ts","../src/models/moment/state.ts","../src/models/moment/helpers.ts","../src/models/moment/thunks.ts","../src/models/moment/model.ts","../src/models/sanity/requests.ts","../src/types/sanity.ts","../src/types/strength.ts","../src/models/sanity/state.ts","../src/models/sanity/actions.ts","../src/models/sanity/thunks.ts","../src/models/sanity/model.ts","../src/models/strength/actions.ts","../src/models/strength/listeners.ts","../src/models/strength/requests.ts","../src/models/strength/helpers.ts","../src/models/strength/state.ts","../src/models/strength/model.ts","../src/types/invitation.ts","../src/models/strength/thunks.ts","../src/utils/onlyKeepDrafts.ts","../src/utils/isDraftId.ts","../src/models/user/actions.ts","../src/models/user/model.ts","../src/models/user/state.ts","../src/utils/anyValueTrue.ts","../src/store.ts","../src/models/settings/hooks.ts","../src/providers/LanguageProvider/LanguageProvider.tsx","../src/providers/PositiveProvider.tsx","../src/models/audience/hooks.ts","../src/models/auth/hooks.ts","../src/models/exercise/hooks.ts","../src/models/goal/hooks.ts","../src/models/group/hooks.ts","../src/models/invitation/hooks.ts","../src/models/membership/hooks.ts","../src/models/moment/hooks.ts","../src/models/sanity/hooks.ts","../src/models/strength/hooks.ts","../src/models/user/hooks.ts"],"sourcesContent":["export enum Language {\n  fi = 'fi',\n  en = 'en',\n}\n\nexport enum Theme {\n  light = 'light',\n  dark = 'dark',\n}\n\nexport enum Environment {\n  development = 'development',\n  staging = 'staging',\n  production = 'production',\n}\n","export default {\n  app: {\n    actions: {\n      activate_tips: {\n        en: 'Activate tips',\n        fi: 'Aktivoi vinkit',\n      },\n      cancel: {\n        en: 'Cancel',\n        fi: 'Peruuta',\n      },\n      confirm: {\n        en: 'Please confirm',\n        fi: 'Vahvista',\n      },\n      edit: {\n        en: 'Edit',\n        fi: 'Muokkaa',\n      },\n      got_it: {\n        en: 'Got it',\n        fi: 'Selvä juttu',\n      },\n      locale: {\n        en: 'en-US',\n        fi: 'fi-FI',\n      },\n      login: {\n        en: 'Login',\n        fi: 'Kirjaudu sisään',\n      },\n      log_in: {\n        en: 'Log in',\n        fi: 'Kirjaudu sisään',\n      },\n      logout: {\n        en: 'Logout',\n        fi: 'Kirjaudu ulos',\n      },\n      log_out: {\n        en: 'Log out',\n        fi: 'Kirjaudu ulos',\n      },\n      save: {\n        en: 'Save',\n        fi: 'Tallenna',\n      },\n      save_changes: {\n        en: 'Save changes',\n        fi: 'Tallenna muutokset',\n      },\n      submitting: {\n        en: 'Submitting',\n        fi: 'Lähettäminen',\n      },\n    },\n    arrow: {\n      en: 'Arrow',\n      fi: 'Nuoli',\n    },\n    confirmations: {\n      ask_discard_changes: {\n        en: 'Discard changes?',\n        fi: 'Hylkää muutokset?',\n      },\n      discard_changes: {\n        en: 'Discard changes',\n        fi: 'Hylkää muutokset',\n      },\n      discard_msg: {\n        en: 'Your changes will not be saved.',\n        fi: 'Muutoksia ei tallenneta.',\n      },\n    },\n    crow_tip: {\n      en: 'Tip from the crow',\n      fi: 'Vinkki varikselta',\n    },\n    email: {\n      en: 'Email',\n      fi: 'Sähköpostiosoite',\n      example: {\n        en: 'email@address.com',\n        fi: 'email@address.com',\n      },\n    },\n    errors: {\n      content_unavailable: {\n        en: 'Requested content is unfortunately unavailable in your language.',\n        fi: 'Hakemaasi sisältöä ei valitettavasti löydy valitsemallesi kielelle.',\n      },\n    },\n    footer: {\n      en: \"We're Positive Learning Ltd from Finland, but our friends call us Positive\",\n      fi: 'Positive Learning Oy, tuttavallisemmin Positive',\n    },\n    happy_kids_learn_best: {\n      en: 'Happy kids learn best.',\n      fi: 'Happy kids learn best.',\n    },\n    menus: {\n      account_settings: {\n        en: 'Account settings',\n        fi: 'Tilin asetukset',\n        family_name: {\n          en: 'Family name',\n          fi: 'Sukunimi',\n        },\n        given_name: {\n          en: 'Given name',\n          fi: 'Etunimi',\n        },\n        your_name: {\n          en: 'Just one more thing.\\nYour name :)',\n          fi: 'Vielä yksi asia.\\nSinun nimesi :)',\n          msg: {\n            en: 'So others can easily recognize you.',\n            fi: 'Jotta muiden on helpompi tunnistaa sinut...',\n          },\n        },\n      },\n      main: {\n        contact_support: {\n          en: 'Contact support',\n          fi: 'Ota yhteyttä',\n        },\n        language: {\n          en: 'Language',\n          fi: 'Kieli',\n        },\n        sanity_remarks_off: {\n          en: 'Hide Sanity remarks',\n          fi: 'Piilota Sanity huomiot',\n        },\n        sanity_remarks_on: {\n          en: 'Show Sanity remarks',\n          fi: 'Näytä Sanity huomiot',\n        },\n      },\n    },\n    tips: {\n      dismiss_toast: {\n        en: 'Tip is dismissed. Re-activate tips from the main menu!',\n        fi: 'Vinkki on piilotettu. Aktivoi vinkit uudestaan päävalikosta!',\n      },\n      reset_toast: {\n        en: 'Tips can be seen again.',\n        fi: 'Vinkit ovat jälleen näkyvissä.',\n      },\n    },\n    today: {\n      en: 'Today',\n      fi: 'Tänään',\n    },\n    token: {\n      errors: {\n        request_1: {\n          en: 'Requesting a login link failed.',\n          fi: 'Linkin tilaaminen ei onnistunut.',\n        },\n        request_2: {\n          en: 'Make sure you have entered your email address correctly and try again.',\n          fi: 'Tarkista syöttämäsi sähköpostiosoite ja kokeile uudelleen.',\n        },\n      },\n      request: {\n        en: 'Request',\n        fi: 'Tilaa',\n        instructions: {\n          en: 'Request a login link by entering your email address',\n          fi: 'Tilaa uusi kirjautumislinkki sähköpostiisi syöttämällä osoitteesi',\n        },\n      },\n      success: {\n        en: 'A login link has been sent to your email address %s!',\n        fi: 'Uusi kirjautumislinkki on lähetetty sähköpostiisi %s!',\n      },\n    },\n    type: {\n      en: 'Type',\n      fi: 'Tyyppi',\n    },\n    videos: {\n      en: 'Videos',\n      fi: 'Videot',\n    },\n    yesterday: {\n      en: 'Yesterday',\n      fi: 'Eilen',\n    },\n  },\n  resources: {\n    en: 'Resources',\n    fi: 'Materiaalia',\n    actions: {\n      download_pdf: {\n        en: 'Download PDF',\n        fi: 'Lataa PDF',\n      },\n    },\n    book: {\n      en: 'Book',\n      fi: 'Kirja',\n    },\n    cards: {\n      en: 'Cards',\n      fi: 'Kortit',\n    },\n    see_the_good_activity_cards: {\n      en: 'See the Good ∙ Activity Cards',\n      fi: 'Huomaa hyvä ∙ Toimintakortit',\n      desc: {\n        en:\n          'Activity Cards describe what the 26 character strengths are in a nutshell, how you recognize them, and how you can develop them in yourself and others.',\n        fi:\n          'Toimintakorteissa esitellään tiivistetysti, mitä 26 luonteenvahvuutta ovat, miten ne voi havaita ja kuinka niitä voi vahvistaa itsessään ja muissa.\\n\\nLadattavissa toistaiseksi vain englanniksi.',\n      },\n      url: {\n        en:\n          'https://s3.eu-central-1.amazonaws.com/varis-materials/public/resources/SeetheGood-ActivityCards-EN.pdf',\n        fi:\n          'https://s3.eu-central-1.amazonaws.com/varis-materials/public/resources/SeetheGood-ActivityCards-EN.pdf',\n      },\n    },\n    see_the_good_student_cards: {\n      en: 'See the Good ∙ Student Cards',\n      fi: 'Huomaa hyvä ∙ Oppilaskortit',\n      desc: {\n        en:\n          'Student Cards have been designed to support positive learning in kindergarten, at school and at home. The deck contains Strength Cards (26pcs), Emotion Cards (7pcs), Action Cards (10pcs) and Assessment Cards (5pcs).',\n        fi:\n          'Oppilaskortit on kehitetty tukemaan positiivista kasvatusta päiväkodissa, koulussa ja kotona. Korttipakka sisältää Vahvuuskortit (26kpl), Tunnekortit (7kpl), Työskentely- ja tilannekortit (10kpl) ja Arviointikortit (5kpl).',\n      },\n      url: {\n        en:\n          'https://s3.eu-central-1.amazonaws.com/varis-materials/public/resources/SeetheGood-StudentCards-EN.pdf',\n        fi:\n          'https://s3.eu-central-1.amazonaws.com/varis-materials/public/resources/SeetheGood-StudentCards-FI.pdf',\n      },\n    },\n  },\n  route: {\n    invitation: {\n      actions: {\n        join_group: {\n          en: 'Join group',\n          fi: 'Liity ryhmään',\n          msg: {\n            en: 'You are all set, the invitation has already been accepted.',\n            fi: 'Kaikki valmista, olet jo hyväksynyt tämän kutsun.',\n          },\n        },\n        sign_up: {\n          en: 'Sign up',\n          fi: 'Luo tili',\n          msg: {\n            en: 'Sign up to join Positive.',\n            fi: 'Luo tili liittyäksesi Positiveen.',\n          },\n        },\n      },\n      errors: {\n        already_invited: {\n          en: 'This person has already been invited.',\n          fi: 'Hänet on jo kutsuttu aiemmin.',\n        },\n        failed_to_send: {\n          en: 'Sending invitation unfortunately failed',\n          fi: 'Kutsun lähettäminen valitettavasti epäonnistui',\n        },\n        invitation_not_found: {\n          en: 'Invitation not found',\n          fi: 'Kutsua ei löytynyt',\n        },\n        invitation_not_found_msg: {\n          en:\n            'The invitation might have been cancelled, addressed to someone else or never even existed.\\nPlease request a new invitation.',\n          fi:\n            'Kutsu saattaa olla peruttu, lähetetty jollekin muulle kuin sinulle, tai sitä ei ehkä ikinä ole ollutkaan.\\nOle hyvä ja tiedustele uutta kutsua.',\n        },\n      },\n      existing_account: {\n        en: 'Already have an account?',\n        fi: 'Onko sinulla jo käyttäjätili?',\n      },\n      header: {\n        en: 'Welcome!',\n        fi: 'Tervetuloa!',\n      },\n      message: {\n        en: 'invited you to join',\n        fi: 'kutsui sinut liittymään ryhmään',\n      },\n      invitations: {\n        en: 'Invitations',\n        fi: 'Kutsut',\n      },\n      status: {\n        accepted: {\n          en: 'Accepted',\n          fi: 'Hyväksytty',\n        },\n        success: {\n          en: 'Invitation successfully sent to %s',\n          fi: 'Kutsu lähetetty osoitteeseen %s',\n        },\n        waiting: {\n          en: 'Pending',\n          fi: 'Odottaa',\n        },\n      },\n      welcome_to_the_group: {\n        en: 'Welcome to the group %s!',\n        fi: 'Tervetuloa ryhmään %s!',\n      },\n    },\n    landing: {\n      desc: {\n        learn: {\n          en:\n            'What is positive education about? What has been researched, what has been found to be good in practice?',\n          fi:\n            'Mistä positiivisessa kasvatuksessa on kyse? Mitä on tutkittu, mitä käytännössä hyväksi havaittu?',\n        },\n        see_the_good: {\n          en: 'Whenever you see the good, give positive feedback.\\nStart now!',\n          fi: 'Kun huomaat hyvää, anna positiivista palautetta.\\nVoit aloittaa heti!',\n        },\n        teach: {\n          en:\n            'This is how you teach character strengths to children and youth. Here you are the learning materials for teaching 26 different strengths.',\n          fi:\n            'Näin opetat luonteenvahvuuksia lapsille ja nuorille. Täältä oppimateriaalit 26 eri vahvuuden opettamiseen.',\n        },\n      },\n      video_url: {\n        en: 'https://youtu.be/0esAAdH9fh4',\n        fi: 'https://youtu.be/rAyuunywao8',\n      },\n      welcome_msg: {\n        en: 'Welcome to See the Good!',\n        fi: 'Huomaa hyvä!\\nTervetuloa mukaan',\n      },\n    },\n    login: {\n      errors: {\n        unknown: {\n          en: 'Login unfortunately failed for an unknown reason.',\n          fi: 'Sisäänkirjautuminen ei valitettavasti tuntemattomasta syystä onnistunut.',\n        },\n        user_not_found: {\n          en: \"Unfortunately we couldn't log you in, user account was not found.\",\n          fi: 'Sisäänkirjautuminen valitettavasti epäonnistui, käyttäjätunnusta ei löytynyt.',\n        },\n      },\n      welcome_message: {\n        en: 'Hey, good to\\nsee you!',\n        fi: 'Hei,\\nhauska nähdä!',\n      },\n    },\n    learn: {\n      en: 'Learn',\n      fi: 'Opi',\n      actions: {\n        next: {\n          en: 'Next',\n          fi: 'Seuraava',\n        },\n      },\n      articles: {\n        en: 'Articles',\n        fi: 'Artikkelit',\n      },\n      header: {\n        en: 'How to implement positive pedagogy in practice?',\n        fi: 'Miten toteuttaa positiivista pedagogiikkaa käytännössä?',\n      },\n      num_videos: {\n        en: '%d videos',\n        fi: '%d videota',\n      },\n    },\n    see_the_good: {\n      en: 'See the Good',\n      fi: 'Huomaa hyvä',\n      actions: {\n        attach_media: {\n          en: 'Attach a photo',\n          fi: 'Liitä kuva',\n        },\n        cancel_invitation: {\n          en: 'Cancel invitation',\n          fi: 'Peruuta kutsu',\n        },\n        change_role: {\n          en: 'Change role',\n          fi: 'Muuta roolia',\n        },\n        create: {\n          en: 'Create',\n          fi: 'Luo',\n          group: {\n            en: 'Create group',\n            fi: 'Luo ryhmä',\n          },\n        },\n        delete: {\n          group: {\n            en: 'Delete group',\n            fi: 'Poista ryhmä',\n          },\n          moment: {\n            en: 'Delete moment',\n            fi: 'Poista bongaus',\n          },\n          photo: {\n            en: 'Delete photo',\n            fi: 'Poista kuva',\n          },\n        },\n        edit: {\n          group: {\n            en: 'Edit group',\n            fi: 'Muokkaa ryhmää',\n          },\n          post: {\n            en: 'Edit post',\n            fi: 'Muokkaa julkaisua',\n          },\n        },\n        invite: {\n          en: 'Invite',\n          fi: 'Kutsu',\n          multiple: {\n            en: 'Invite multiple users by separating email addresses with commas.',\n            fi: 'Kutsu useampia käyttäjiä erottamalla sähköpostiosoitteet pilkulla.',\n          },\n          new_member: {\n            en: 'Invite new member',\n            fi: 'Kutsu uusi jäsen',\n          },\n          group: {\n            en: 'Invite to group',\n            fi: 'Kutsu ryhmään',\n          },\n        },\n        leave: {\n          en: 'Leave',\n          fi: 'Poistu',\n          group: {\n            en: 'Leave from group',\n            fi: 'Poistu ryhmästä',\n          },\n        },\n        remove: {\n          en: 'Remove',\n          fi: 'Poista',\n          from_group: {\n            en: 'Remove from group',\n            fi: 'Poista ryhmästä',\n          },\n        },\n        select_group: {\n          en: 'Select group',\n          fi: 'Valitse ryhmä',\n        },\n        spot_strength: {\n          en: 'Spot strength',\n          fi: 'Bongaa vahvuus',\n        },\n      },\n      confirmations: {\n        delete: {\n          group: {\n            msg_1: {\n              en: 'Are you sure you want to delete the group?',\n              fi: 'Haluatko varmasti poistaa ryhmän?',\n            },\n            msg_2: {\n              en: 'If you delete the group, all data for this group will be lost.',\n              fi: 'Jos poistat ryhmän, kaikki ryhmälle luotu tieto menetetään.',\n            },\n          },\n        },\n        downgrade_role: {\n          en:\n            'Are you sure you want to change your role in this group? If you change your role, you cannot change it back.',\n          fi:\n            'Haluatko varmasi muuttaa rooliasi ryhmässä? Jos muutat rooliasi, et voi muuttaa sitä enää takaisin.',\n        },\n        leave_group: {\n          en: 'Are you sure you want to leave from group?',\n          fi: 'Haluatko varmasti poistua ryhmästä?',\n        },\n        invitation: {\n          en: 'Are you sure you want to cancel the invitation?',\n          fi: 'Haluatko varmasti peruuttaa kutsun?',\n        },\n        memberships: {\n          en: 'Are you sure you want to remove the user from group?',\n          fi: 'Haluatko varmasti poistaa käyttäjän ryhmästä?',\n        },\n        moment: {\n          en: 'Are you sure you want to remove the strength spotting?',\n          fi: 'Haluatko varmasti poistaa vahvuusbongauksen?',\n        },\n      },\n      errors: {\n        create_group: {\n          en: 'Something went wrong when creating the group',\n          fi: 'Ryhmän luominen ei onnistunut',\n        },\n        canceling_invitation: {\n          en: 'Error canceling invitation :(',\n          fi: 'Virhe kutsua peruttaessa :(',\n        },\n        fetching_group_invitations: {\n          en: 'Error loading the group invitation listing :(',\n          fi: 'Virhe ryhmän kutsuja ladatessa :(',\n        },\n        fetching_group_members: {\n          en: 'Error loading the group member listing :(',\n          fi: 'Virhe ryhmän jäsenlistaa ladatessa :(',\n        },\n        invalid_email: {\n          en: 'Please enter a valid email',\n          fi: 'Tarkista sähköpostiosoite',\n        },\n        invalid_group: {\n          en: 'Requested group could not be found',\n          fi: 'Haettua ryhmää ei löytynyt',\n        },\n        invalid_input_length: {\n          en: 'Please enter between %d and %d characters',\n          fi: 'Ole hyvä ja kirjoita %d - %d kirjainta',\n        },\n        member_already_exists: {\n          en: 'This person is already a member of this group.',\n          fi: 'Hän on jo tämän ryhmän jäsen.',\n        },\n        updating_membership: {\n          en: 'Error updating group member information :(',\n          fi: 'Virhe ryhmän jäsenen tietoja muutettaessa :(',\n        },\n        updating_user: {\n          en: 'Error updating user information :(',\n          fi: 'Virhe käyttäjän tietoja muutettaessa :(',\n        },\n      },\n      feed: {\n        first_moment_tip: {\n          en: 'Great! %s got its first positive feedback!\\nKeep on Seeing the Good!',\n          fi: 'Upeaa! %s sai ensimmäisen positiivisen palautteen!\\nHuomatkaa hyvä jatkossakin!',\n        },\n      },\n      from: {\n        en: 'From',\n        fi: 'Keneltä',\n      },\n      group: {\n        name: {\n          en: 'Group name',\n          fi: 'Ryhmän nimi',\n        },\n        tip_1: {\n          en: 'Group tab is for managing the members of your group, eg. a school class.',\n          fi: 'Ryhmä -välilehdellä hallinnoidaan ryhmän, esim. koululuokan jäseniä.',\n        },\n        tip_2: {\n          en:\n            'For now you may only invite other managers, eg. other teachers into the group. However, soon we will support other roles as well.',\n          fi:\n            'Toistaiseksi voit kutsua ryhmään vain toisia hallinnoijia, esim. toisia opettajia. Jatkossa tuemme myös muita rooleja.',\n        },\n      },\n      manage_organization: {\n        en: 'Manage organization',\n        fi: 'Hallinnoi organisaatiota',\n      },\n      member_role: {\n        en: 'Member role',\n        fi: 'Jäsenen rooli',\n      },\n      members: {\n        en: 'Members',\n        fi: 'Jäsenet',\n      },\n      menu: {\n        feed: {\n          en: 'Feed',\n          fi: 'Feedi',\n        },\n        group: {\n          en: 'Group',\n          fi: 'Ryhmä',\n        },\n        insights: {\n          en: 'Insights',\n          fi: 'Yhteenveto',\n        },\n      },\n      modal: {\n        actions: {\n          edit_post: {\n            en: 'Edit post',\n            fi: 'Muokkaa julkaisua',\n          },\n        },\n        step_1: {\n          en: 'Step %s/2: Select Strength',\n          fi: '%s/2: Valitse vahvuus',\n          power_strengths: {\n            en: 'Power strengths',\n            fi: 'Voimavahvuudet',\n          },\n          more_strengths: {\n            en: 'More trengths',\n            fi: 'Lisää vahvuuksia',\n          },\n          tip_1: {\n            en:\n              'Helping friends is an example of Kindness and focusing on your task is an example of Self-regulation.',\n            fi:\n              'Kaverin auttaminen on esimerkki ystävällisyydestä ja keskittyminen annettuun tehtävään on esimerkki itsesäätelystä.',\n          },\n          tip_2: {\n            en: 'Select a strength to discover more examples of strengths in action!',\n            fi: 'Valitse vahvuus löytääksesi lisää esimerkkejä vahvuuksien käytöstä!',\n          },\n        },\n        step_2: {\n          en: 'Step %s/2: Include Details',\n          fi: '%s/2: Lisätietoja',\n          desc: {\n            en: 'Describe use of strength...',\n            fi: 'Kuvaile vahvuuden käyttöä...',\n          },\n          examples: {\n            en: 'Examples of strength in action',\n            fi: 'Esimerkkejä vahvuuden käytöstä',\n          },\n          tip_1: {\n            en: 'Enriching feedback with a description makes it more meaningful to the receiver.',\n            fi:\n              'Kuvailemalla vahvuuden käyttöä palautteesta tulee vastaanottajalle merkityksellisempi.',\n          },\n          tip_2: {\n            en: 'Use the examples from below, write your own, or just save without!',\n            fi:\n              'Valitse esimerkki listasta, kuvaile tapahtumaa omin sanoin tai tallenna ilman kuvausta.',\n          },\n        },\n      },\n      moments: {\n        en: 'Moments',\n        fi: 'Hetket',\n      },\n      no_group_selected: {\n        en: 'Create a group to start spotting strengths.',\n        fi: 'Luo ryhmä alkaaksesi bongaamaan vahvuuksia.',\n      },\n      no_groups: {\n        en: 'No groups',\n        fi: 'Ei ryhmiä',\n        actions: {\n          create_group: {\n            en: 'Create group',\n            fi: 'Luo ryhmä',\n          },\n        },\n        group_name: {\n          en: 'Your group name',\n          fi: 'Ryhmäsi nimi',\n        },\n        page_title: {\n          en: 'Seeing the Good in your group promotes learning',\n          fi: 'Hyvän huomaaminen ryhmässäsi edistää oppimista',\n        },\n        placeholder: {\n          en: '2A, Seahorses...',\n          fi: '2A, Merihevoset...',\n        },\n        tip: {\n          en: \"Let's start by creating a group!\",\n          fi: 'Aloitetaan luomalla ryhmä!',\n        },\n      },\n      no_moments: {\n        en: '%s, start showing your strengths and they will be spotted!',\n        fi: '%s, näyttäkää vahvuutenne ja alkakaa bongaamaan!',\n        page_title: {\n          en: \"%s, let's See the Good together\",\n          fi: '%s, huomataan yhdessä hyvää',\n        },\n        sub_heading: {\n          en: 'Seeing the Good is about making strength usage visible',\n          fi: 'Hyvän huomaaminen on vahvuuksien käytön näkyväksi tekemistä',\n        },\n        tip: {\n          en: 'Give your first positive feedback,\\npress plus button!',\n          fi: 'Anna positiivista palautetta,\\npaina plussaa!',\n        },\n        watch_video: {\n          en: 'Watch how',\n          fi: 'Näin se käy',\n        },\n      },\n      only_group_manager: {\n        en:\n          'You are the only Manager in the group.\\n\\nTo change your role or leave the group, please first make sure there is another Manager in the group.',\n        fi:\n          'Olet ryhmän ainoa hallinnoija.\\n\\nVaihtaaksesi rooliasi tai poistuaksesi ryhmästä, ole hyvä ja varmista ensin että ryhmällä on toinen hallinnoija.',\n      },\n      organization: {\n        en: 'Organization',\n        fi: 'Organisaatio',\n        name: {\n          en: 'Organization name',\n          fi: 'Organisaatio nimi',\n        },\n        tip_1: {\n          en: 'Organization tab is for managing the members of your organization, eg. a school.',\n          fi: 'Organisaatio -välilehdellä hallinnoidaan organisaation, esim. koulun jäseniä.',\n        },\n        tip_2: {\n          en:\n            'As an organization manager you may invite members, eg. teachers into the organization. Members create groups of their own and manage members of their groups independently.',\n          fi:\n            'Organisaation hallinnoijana voit kutsua jäseniä, esim. opettajia, organisaation jäseniksi. Jäsenet luovat organisaatioon omia ryhmiään ja hallinnoivat niiden jäseniä itsenäisesti.',\n        },\n      },\n      other_groups: {\n        en: 'Other groups',\n        fi: 'Muut ryhmät',\n      },\n      plus_others: {\n        en: '+ %s others',\n        fi: '+ %s muuta',\n      },\n      progress: {\n        en: 'Progress',\n        fi: 'Kehitys',\n      },\n      roles: {\n        class: {\n          manager: {\n            en: 'Manager',\n            fi: 'Hallinnoija',\n            desc: {\n              en:\n                'For example, teacher\\n• Manage group members and content\\n• Spot strengths\\n• View strengths spottings',\n              fi:\n                'Esim. opettaja\\n• Hallinnoi ryhmän jäseniä ja sisältöä\\n• Bongaa vahvuuksia\\n• Lukee vahvuusbongauksia',\n            },\n          },\n          spotter: {\n            en: 'Spotter',\n            fi: 'Bongaaja',\n            desc: {\n              en:\n                'For example, co-teacher or student\\n• Spot strengths\\n• View strengths spottings',\n              fi:\n                'Esim. toinen opettaja tai oppilas\\n• Bongaa vahvuuksia\\n• Lukee vahvuusbongauksia',\n            },\n          },\n          viewer: {\n            en: 'Viewer',\n            fi: 'Lukija',\n            desc: {\n              en: 'For example, student\\n• View strength spottings',\n              fi: 'Esim. oppilas\\n• Lukee vahvuusbongauksia',\n            },\n          },\n        },\n        more_coming_soon: {\n          en: 'More roles coming soon!',\n          fi: 'Lisää rooleja tulossa pian!',\n        },\n        organization: {\n          manager: {\n            en: 'Manager',\n            fi: 'Hallinnoija',\n            desc: {\n              en:\n                'For example, IT support or teacher\\n• Manage members of the organization\\n• Create and manage groups for e.g. students',\n              fi:\n                'Esim. IT-tukihenkilö tai opettaja\\n• Hallinnoi organisaation jäseniä\\n• Luo ja hallinnoi ryhmiä esim. oppilaille',\n            },\n          },\n          member: {\n            en: 'Member',\n            fi: 'Jäsen',\n            desc: {\n              en: 'For example, teacher\\n• Create and manage groups for e.g. students',\n              fi: 'Esim. opettaja\\n• Luo ja hallinnoi ryhmiä esim. oppilaille',\n            },\n          },\n        },\n      },\n      strengths: {\n        en: 'Strengths',\n        fi: 'Vahvuudet',\n      },\n      to: {\n        en: 'To',\n        fi: 'Kenelle',\n      },\n      your_groups: {\n        en: 'Your groups',\n        fi: 'Sinun ryhmäsi',\n      },\n    },\n    teach: {\n      en: 'Teach',\n      fi: 'Opeta',\n      actions: {\n        download_ppt: {\n          en: 'Download Powerpoint',\n          fi: 'Lataa Powerpoint',\n        },\n      },\n      duration: {\n        en: 'Duration',\n        fi: 'Kesto',\n      },\n      exercise: {\n        additional_exercises: {\n          en: 'Additional exercises',\n          fi: 'Harjoitukset',\n        },\n        additional_exercises_preschool: {\n          en: 'Additional exercises',\n          fi: 'Harjoitukset',\n        },\n        basics: {\n          en: 'Basics',\n          fi: 'Perusteet',\n        },\n        basics_preschool: {\n          en: 'Basics',\n          fi: 'Oppituokiot',\n        },\n        lesson: {\n          part: {\n            en: 'Part of a lesson',\n            fi: 'Osa tuntia',\n          },\n          project: {\n            en: 'Project',\n            fi: 'Projekti',\n          },\n          whole: {\n            en: 'Whole lesson',\n            fi: 'Koko tunti',\n          },\n        },\n        group: {\n          en: 'Entire group exercise',\n          fi: 'Koko ryhmän tehtävä',\n        },\n        homework: {\n          en: 'Homework',\n          fi: 'Kotitehtävä',\n        },\n        individual: {\n          en: 'Individual exercise',\n          fi: 'Yksilötehtävä',\n        },\n        pair: {\n          en: 'Pair exercise',\n          fi: 'Paritehtävä',\n        },\n        small_group: {\n          en: 'Small group exercises',\n          fi: 'Pienryhmätehtävä',\n        },\n        teacher: {\n          en: 'Exercise for teacher',\n          fi: 'Tehtävä opettajalle',\n        },\n        xmas_doors: {\n          en: 'Doors',\n          fi: 'Luukut',\n        },\n      },\n      exercises: {\n        en: 'Exercises',\n        fi: 'Harjoitukset',\n      },\n      find_lesson_plans: {\n        en: 'Find ready made lesson plans and engaging activities',\n        fi: 'Täältä löydät oppituntikokonaisuuksia ja innostavia tehtäviä',\n      },\n      how_to_find_strengths: {\n        en: 'How to find the strengths',\n        fi: '',\n      },\n      more_strengths: {\n        en: 'More strengths',\n        fi: 'Lisää vahvuuksia',\n      },\n      power_strengths: {\n        en: 'Power strengths',\n        fi: 'Voimavahvuudet',\n        desc: {\n          en:\n            'Welcome to teach character strengths. All strengths are needed, but three of them, the so-called power strengths are particularly important.',\n          fi:\n            'Tervetuloa opettamaan luonteenvahvuuksia. Kaikkia vahvuuksia tarvitaan, mutta kolme niistä, ns. voimavahvuudet ovat erityisen tärkeitä.',\n        },\n      },\n      teach_character_strengths: {\n        en: 'Teach character strengths',\n        fi: 'Opeta luonteenvahvuuksia',\n      },\n      teacher_guide: {\n        en: \"Teacher's Guide\",\n        fi: 'Opettajan opas',\n      },\n      wave_of_strengths: {\n        en: 'Wave of strengths',\n        fi: 'Opeta vahvuuksia aalloissa',\n      },\n      wave: {\n        en: 'Wave %d: %s',\n        fi: 'Aalto %d: %s',\n      },\n      waves_desc: {\n        en:\n          'Teach strengths in waves. After the power strengths, you can introduce strength sets as suggested below. It is good to teach intrapersonal (e. g. self-regulation) and interpersonal (e.g. kindness) strengths in the same wave. Furthermore, teaching in the same wave the strengths of \"heart\" (e.g. compassion) and \"head\" (e.g. carefulness) pays off.  Of course, feel free to choose which strength you focus on at any given time.',\n        fi:\n          'Jatka vahvuuksien opetusta aaltoina. Voimavahvuuksien jälkeen seuraavassa aallossa voit esitellä  alla olevia vahvuuskimppuja.  On hyvä opettaa samassa aallossa yksilöön ja ryhmään kohdistuvia vahvuuksia (kuten itsesäätely ja ystävällisyys) sekä \"sydämen\" (myötätunto) ja \"pään\" (harkitsevuus) vahvuuksia. Voit toki myös vapaasti valita, mihin vahvuuteen kulloinkin keskitytte.',\n      },\n    },\n  },\n};\n","export enum Path {\n  goals = 'goals',\n  groups = 'groups',\n  invitations = 'invitations',\n  media = '/medias',\n  members = 'members',\n  session = 'session',\n}\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  fetchGroups = 'fetchGroups',\n  setSelectedGroup = 'setSelectedGroup',\n  createGroup = 'createGroup',\n  editGroup = 'editGroup',\n  deleteGroup = 'deleteGroup',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { Language } from 'types/settings';\n\nexport const createLanguageContent = (data: Record<string, string>, lang: Language): {} => {\n  const langLength: number = lang.length * -1;\n\n  return Object.keys(data)\n    .filter((key: string) => key.slice(langLength) === lang)\n    .reduce((obj: Record<string, string>, key: string) => {\n      obj[key.slice(0, key.length - (lang.length + 1))] = data[key];\n      return obj;\n    }, {});\n};\n","import axios, { AxiosRequestConfig } from 'axios';\nimport { IAxiosCacheAdapterOptions, setupCache } from 'axios-cache-adapter';\n\nconst apiBaseUrl = process.env.REACT_APP_API_BASE_URL;\n\ninterface IConfig extends IAxiosCacheAdapterOptions {\n  uuid: string;\n  store: { removeItem: (key: string) => void };\n}\n\nconst cache = setupCache({\n  maxAge: 15 * 60 * 1000,\n  clearOnStale: false,\n  readOnError: true,\n  invalidate: async (config: IConfig, request: AxiosRequestConfig) => {\n    if (request.clearCacheEntry) {\n      await config.store.removeItem(config.uuid);\n    }\n  },\n});\n\nconst client = axios.create({\n  baseURL: apiBaseUrl,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json; charset=utf-8',\n  },\n  adapter: cache.adapter,\n});\n\nclient.interceptors.response.use(\n  (res) => res,\n  (error) => {\n    if (error.response?.status === 404) {\n      throw new Error(`${error.config.url} not found`);\n    }\n    throw error;\n  }\n);\n\nexport default client;\n","import { Invitation } from './invitation';\nimport { Membership } from './membership';\n\nexport type Group = {\n  id: string;\n  invitations?: Invitation[];\n  memberships?: Membership[];\n  name?: string;\n  userRole: GroupRole;\n  parentGroup?: Group;\n  type: GroupType;\n};\n\nexport interface Class extends Group {\n  type: GroupType.class;\n}\n\nexport interface Organization extends Group {\n  childGroups?: Group[];\n  type: GroupType.organization;\n}\n\nexport type GroupResponse = {\n  ID: string;\n  Name: string;\n  Type: GroupType;\n  UserRole: GroupRole;\n  ParentGroup?: GroupResponse;\n};\n\nexport enum GroupType {\n  class = 'class',\n  organization = 'organization',\n}\n\nexport enum GroupRole {\n  manager = 'owner',\n  member = 'tutor',\n  none = '',\n}\n","export const formatName = (givenName: string, familyName: string): string =>\n  [givenName, familyName].filter(Boolean).join(' ');\n","import { User, UserResponse } from 'types/user';\nimport { formatName } from 'utils/formatName';\n\nexport const formatUserResponse = (userResponse: UserResponse): User => ({\n  id: userResponse.ID,\n  email: userResponse.Email,\n  givenName: userResponse.GivenName,\n  familyName: userResponse.FamilyName,\n  name: formatName(userResponse.GivenName, userResponse.FamilyName),\n});\n\nexport const scrubPII = (user: User): User => ({ id: user.id });\n","import { scrubPII as scrubUserPII } from 'models/user/helpers';\n\nimport { MembershipResponse, Membership } from 'types/membership';\n\nexport const formatMembershipsResponse = (memberships: MembershipResponse[]): Membership[] =>\n  memberships\n    .map((membership: MembershipResponse) => ({\n      user: {\n        id: membership.ID,\n        familyName: membership.FamilyName,\n        givenName: membership.GivenName,\n        name: [membership.GivenName, membership.FamilyName].filter(Boolean).join(' '),\n      },\n      role: membership.Role,\n    }))\n    .sort((a: Membership, b: Membership) => {\n      if (a.role < b.role) {\n        return -1;\n      } else if (a.role > b.role) {\n        return 1;\n      } else if (a.user.name && b.user.name && a.user.name < b.user.name) {\n        return -1;\n      } else if (a.user.name && b.user.name && a.user.name > b.user.name) {\n        return 1;\n      }\n      return 0;\n    });\n\nexport const formatMembershipResponse = (membership: MembershipResponse) => ({\n  user: {\n    id: membership.ID,\n    familyName: membership.FamilyName,\n    givenName: membership.GivenName,\n    name: [membership.GivenName, membership.FamilyName].filter(Boolean).join(' '),\n  },\n  role: membership.Role,\n});\n\nexport const scrubPII = (membership: Membership): Membership => ({\n  role: membership.role,\n  user: scrubUserPII(membership.user),\n});\n","import { scrubPII as scrubUserPII } from 'models/user/helpers';\nimport { Invitation, InvitationResponse } from 'types/invitation';\nimport { formatName } from 'utils/formatName';\n\nexport const formatInvitationResponse = (invitation: InvitationResponse): Invitation => ({\n  id: invitation.ID,\n  email: invitation.Email,\n  role: invitation.Role,\n  status: invitation.Status,\n  group_id: invitation.GroupID,\n  creator: {\n    id: invitation.Creator?.ID,\n    name: formatName(invitation.Creator?.GivenName, invitation.Creator?.FamilyName),\n    givenName: invitation.Creator?.GivenName,\n    familyName: invitation.Creator?.FamilyName,\n  },\n  type: invitation.Type,\n});\n\nexport const scrubPII = (invitation: Invitation): Invitation => ({\n  id: invitation.id,\n  role: invitation.role,\n  status: invitation.status,\n  group_id: invitation.group_id,\n  creator: scrubUserPII(invitation.creator),\n});\n","export enum Status {\n  complete = 'complete',\n  idle = 'idle',\n  loading = 'loading',\n}\n","import { scrubPII as scrubMembershipsPII } from 'models/membership/helpers';\nimport { scrubPII as scrubInvitationsPII } from 'models/invitation/helpers';\n\nimport { Class, Group, GroupResponse, GroupType, GroupRole, Organization } from 'types/group';\n\nexport const isClass = (g: Group): g is Class => g.type === GroupType.class;\n\nexport const isOrphanClass = (g: Group): g is Class => isClass(g) && !g.parentGroup;\n\nexport const isOrg = (g: Group): g is Organization => g.type === GroupType.organization;\n\nexport const formatGroupsResponse = (groups: GroupResponse[]): Group[] =>\n  groups\n    .map((group: GroupResponse) => ({\n      id: group.ID,\n      name: group.Name,\n      userRole: group.UserRole,\n      type: group.Type,\n      parentGroup: group.ParentGroup\n        ? {\n            id: group.ParentGroup.ID,\n            name: group.ParentGroup.Name,\n            type: group.ParentGroup.Type,\n            userRole: group.ParentGroup.UserRole,\n          }\n        : undefined,\n    }))\n    .sort((a: Group, b: Group): number => {\n      const nameA = a.name?.toUpperCase() || '';\n      const nameB = b.name?.toUpperCase() || '';\n      return nameA < nameB ? -1 : nameA > nameB ? 1 : 0;\n    });\n\nexport const appendChildGroups = (groups: Group[]): Group[] =>\n  groups.map((group) => ({\n    ...group,\n    childGroups:\n      group.type === GroupType.organization\n        ? groups.filter(({ parentGroup }) => parentGroup && parentGroup.id === group.id)\n        : undefined,\n  }));\n\nexport const resolveRestrictedAccount = (groups: Group[]) => {\n  const hasOrganizations = filterOrganizations(groups || []).length > 0;\n  const hasParentGroups = (groups || []).filter((group) => group.parentGroup).length > 0;\n\n  return hasParentGroups && !hasOrganizations;\n};\n\nconst filterOrganizations = (groups: Group[], managerOnly: boolean = false) =>\n  groups\n    .filter((group) => group.type === GroupType.organization)\n    .filter((organization) => (managerOnly ? organization.userRole === GroupRole.manager : true));\n\nexport const scrubPII = (group: Group): Group => ({\n  id: group.id,\n  type: group.type,\n  userRole: group.userRole,\n  parentGroup: group.parentGroup && scrubPII(group.parentGroup),\n  memberships: group.memberships?.map((m) => scrubMembershipsPII(m)),\n  invitations: group.invitations?.map((i) => scrubInvitationsPII(i)),\n});\n","export enum RequestTimestamp {\n  fresh = 'fresh',\n  stale = 'stale',\n}\n\nexport type RequestTimestampPayload = Record<RequestTimestamp, number>;\n","import { computed, Computed } from 'easy-peasy';\n\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\nimport { isOrg, isOrphanClass, resolveRestrictedAccount } from './helpers';\n\nimport { Group, Organization, Class } from 'types/group';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGroupModelState {\n  error: RequestTypeToError;\n  groups: Group[];\n  hasSelectableGroups: Computed<IGroupModelState, boolean>;\n  nameMaxLength: number;\n  nameMinLength: number;\n  organizations: Computed<IGroupModelState, Organization[]>;\n  orphanGroups: Computed<IGroupModelState, Class[]>;\n  restrictedAccount: Computed<IGroupModelState, boolean>;\n  requestTimestamps: RequestTimestampPayload;\n  selectedGroup?: Group;\n  selectedGroupId?: string;\n  status: RequestTypeToStatus;\n}\n\nconst state: IGroupModelState = {\n  error: {},\n  groups: [],\n  hasSelectableGroups: computed(\n    (state) => state.groups?.length > 0 || state.orphanGroups?.length > 0\n  ),\n  nameMaxLength: 32,\n  nameMinLength: 1,\n  organizations: computed(({ groups }) => groups.filter(isOrg)),\n  orphanGroups: computed(({ groups }) => groups.filter(isOrphanClass)),\n  restrictedAccount: computed((state) => resolveRestrictedAccount(state.groups)),\n  requestTimestamps: { fresh: 0, stale: 0 },\n  selectedGroup: undefined,\n  selectedGroupId: undefined,\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IGroupModel } from './model';\n\nimport { Group } from 'types/group';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGroupModelActions {\n  setError: Action<\n    IGroupModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setGroups: Action<IGroupModel, { groups: Group[] }>;\n  setRequestTimestamps: Action<IGroupModel, { type: RequestTimestamp; value: number }>;\n  setSelectedGroup: Action<IGroupModel, Group | undefined>;\n  setSelectedGroupId: Action<IGroupModel, string | undefined>;\n  setStatus: Action<IGroupModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IGroupModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setGroups: action((state, payload) => {\n    state.groups = payload.groups;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setSelectedGroup: action((state, payload) => {\n    state.selectedGroup = payload;\n  }),\n\n  setSelectedGroupId: action((state, payload) => {\n    state.selectedGroupId = payload;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { AxiosInstance } from 'axios';\nimport { Thunk, thunk } from 'easy-peasy';\n\nimport {\n  CreateGroupPayload,\n  DeleteGroupPayload,\n  EditGroupPayload,\n  FetchGroupsPayload,\n} from './payloads';\nimport { IGroupModel } from './model';\nimport { RequestType } from './requests';\nimport { appendChildGroups, formatGroupsResponse } from './helpers';\n\nimport { IStoreModel } from 'store';\nimport { paths } from 'api';\n\nimport { Group, GroupResponse } from 'types/group';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGroupModelThunks {\n  createGroup: Thunk<IGroupModel, CreateGroupPayload, { client: AxiosInstance }, IStoreModel>;\n  deleteGroup: Thunk<IGroupModel, DeleteGroupPayload, { client: AxiosInstance }, IStoreModel>;\n  editGroup: Thunk<IGroupModel, EditGroupPayload, { client: AxiosInstance }, IStoreModel>;\n  fetchGroups: Thunk<IGroupModel, FetchGroupsPayload, { client: AxiosInstance }, IStoreModel>;\n}\n\nconst thunks: IGroupModelThunks = {\n  createGroup: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.createGroup, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      const groups = getState().groups;\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        const [newGroup] = await client\n          .post(\n            payload.parentGroupId\n              ? paths.group.create.subgroup({ groupId: payload.parentGroupId })\n              : paths.group.create.group(),\n            payload\n          )\n          .then(({ data }: { data: GroupResponse }): Group[] => formatGroupsResponse([data]));\n\n        /* UPDATE GROUPS */\n        const updatedGroups = groups.concat(newGroup);\n        updatedGroups && actions.setGroups({ groups: updatedGroups });\n\n        /* SET NEW GROUP TO SELECTED GROUP */\n        actions.setSelectedGroupId(newGroup.id);\n        actions.setError({ type: RequestType.createGroup, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.createGroup,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.createGroup, value: Status.complete });\n      }\n    }\n  ),\n\n  deleteGroup: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.deleteGroup, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      const groups = getState().groups;\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        /* DELETE GROUP */\n        await client.delete(paths.group.delete(payload));\n\n        /* REMOVE DELETED GROUP FROM GROUPS */\n        const updatedGroups: Group[] =\n          groups.filter((group: Group) => group.id !== payload.groupId) || [];\n\n        actions.setGroups({ groups: updatedGroups });\n        actions.setError({ type: RequestType.deleteGroup, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteGroup,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteGroup, value: Status.complete });\n      }\n    }\n  ),\n\n  editGroup: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.editGroup, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      const groups = getState().groups;\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        await client\n          .put(paths.group.edit({ groupId: payload.group.id }), payload.group)\n          .then(() => {\n            const updatedGroups = groups?.map((group: Group) =>\n              group.id === payload.group.id\n                ? {\n                    ...group,\n                    ...payload.group,\n                  }\n                : group\n            );\n\n            updatedGroups && actions.setGroups({ groups: updatedGroups });\n            actions.setError({ type: RequestType.editGroup, value: undefined });\n          });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.editGroup,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.editGroup, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchGroups: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status[RequestType.fetchGroups] !== Status.idle) return;\n\n      actions.setStatus({ type: RequestType.fetchGroups, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const groups: Group[] = await client\n          .get(\n            payload?.groupId ? paths.group.get({ groupId: payload.groupId }) : paths.groups.get(),\n            { clearCacheEntry: isCacheStale }\n          )\n          .then(({ data }: { data: GroupResponse[] | GroupResponse }): Group[] =>\n            appendChildGroups(formatGroupsResponse(Array.isArray(data) ? data : [data]))\n          );\n\n        actions.setGroups({ groups });\n        actions.setError({ type: RequestType.fetchGroups, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchGroups,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: RequestType.fetchGroups, value: Status.complete });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import { Path } from 'types/api';\n\nexport default {\n  goal: {\n    delete: ({ groupId, goalId }: { groupId: string; goalId: string }) =>\n      `${Path.groups}/${groupId}/${Path.goals}/${goalId}`,\n    edit: ({ groupId, goalId }: { groupId: string; goalId: string }) =>\n      `${Path.groups}/${groupId}/${Path.goals}/${goalId}`,\n    create: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/${Path.goals}`,\n  },\n  goals: {\n    get: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/${Path.goals}`,\n  },\n  group: {\n    create: {\n      group: () => `/${Path.groups}/`,\n      subgroup: ({ groupId }: { groupId: string }) => `/${Path.groups}/${groupId}/subgroups`,\n    },\n    invitations: {\n      get: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/${Path.invitations}`,\n    },\n    memberships: {\n      delete: ({ groupId, memberId }: { groupId: string; memberId: string }) =>\n        `${Path.groups}/${groupId}/members/${memberId}`,\n      edit: ({ groupId, memberId }: { groupId: string; memberId: string }) =>\n        `${Path.groups}/${groupId}/members/${memberId}`,\n      get: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/${Path.members}`,\n      post: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/members`,\n    },\n    delete: ({ groupId }: { groupId: string }) => `/${Path.groups}/${groupId}`,\n    edit: ({ groupId }: { groupId: string }) => `/${Path.groups}/${groupId}`,\n    get: ({ groupId }: { groupId: string }) => `/${Path.groups}/${groupId}`,\n  },\n  groups: {\n    get: () => `/${Path.groups}`,\n  },\n  invitation: {\n    accept: ({ invitationId }: { invitationId: string }) =>\n      `${Path.invitations}/${invitationId}/acceptance`,\n    delete: ({ invitationId }: { invitationId: string }) => `${Path.invitations}/${invitationId}`,\n    get: ({ token }: { token: string }) => `${Path.invitations}?token=${token}`,\n    resend: ({ invitationId }: { invitationId: string }) =>\n      `${Path.invitations}/${invitationId}/resend`,\n  },\n  moment: {\n    create: ({ groupId }: { groupId: string }) => `${Path.groups}/${groupId}/moments`,\n    delete: ({ groupId, momentId }: { groupId: string; momentId: string }) =>\n      `${Path.groups}/${groupId}/moments/${momentId}`,\n    edit: ({ groupId, momentId }: { groupId: string; momentId: string }) =>\n      `${Path.groups}/${groupId}/moments/${momentId}`,\n    media: {\n      create: ({ momentId }: { momentId: string }) => `${Path.media}?momentID=${momentId}`,\n      delete: ({ mediaId }: { mediaId: string }) => `${Path.media}/${mediaId}`,\n    },\n  },\n  moments: {\n    get: ({ groupId, cursor, count }: { groupId: string; cursor?: string; count?: number }) =>\n      `${Path.groups}/${groupId}/moments${\n        cursor && count ? `?cursor=${cursor}&count=${count}` : ''\n      }${cursor && !count ? `?cursor=${cursor}` : ''}${!cursor && count ? `?count=${count}` : ''}`,\n  },\n  session: {\n    postIdToken: ({ language }: { language: string }) => `/${Path.session}?lang=${language}`,\n  },\n};\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IGroupModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Group, GroupType, GroupRole } from 'types/group';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGroupModelListeners {\n  onSetGroups?: ThunkOn<IGroupModel, void, IStoreModel>;\n  onSetSelectedGroupId?: ThunkOn<IGroupModel, void, IStoreModel>;\n  onSetSelectedGroup?: ThunkOn<IGroupModel, void, IStoreModel>;\n  onSetStatus: ThunkOn<IGroupModel, IStoreModel>;\n}\n\nconst listeners: IGroupModelListeners = {\n  onSetGroups: thunkOn(\n    (actions) => [actions.setGroups],\n    async (actions, payload, { getState }) => {\n      const state = getState();\n      const { groups } = payload.payload;\n\n      const selectedGroupId: string | undefined = state.selectedGroupId;\n      let groupId: string | undefined;\n\n      if (selectedGroupId && groups.find((group: Group) => group.id === selectedGroupId)) {\n        groupId = selectedGroupId;\n      } else if (groups.length) {\n        const newGroup = groups.find((group: Group) => group.type === GroupType.class);\n\n        if (newGroup) {\n          /* If a class exists */\n          groupId = newGroup.id;\n        } else {\n          /* If not */\n          groupId = groups[0].id;\n        }\n      }\n\n      actions.setSelectedGroupId(groupId || undefined);\n    }\n  ),\n\n  onSetSelectedGroupId: thunkOn(\n    (actions) => [actions.setSelectedGroupId],\n    async (actions, target, { getStoreState, getStoreActions }) => {\n      actions.setStatus({ type: RequestType.setSelectedGroup, value: Status.loading });\n\n      try {\n        const { groups } = getStoreState().groups;\n\n        const groupId: string | undefined = target.payload;\n        const activeGroup = groups?.find((group: Group) => group.id === groupId);\n\n        if (!groupId || !activeGroup) {\n          actions.setSelectedGroup(undefined);\n          return;\n        }\n\n        let isManager: boolean = false;\n\n        /* MEMBERSHIPS */\n        await getStoreActions().memberships.fetchMemberships({\n          groupId,\n        });\n\n        /* INVITATIONS */\n        if (activeGroup.userRole === GroupRole.manager) {\n          isManager = true;\n          await getStoreActions().invitations.fetchInvitations({\n            groupId: activeGroup.id,\n          });\n        }\n\n        actions.setSelectedGroup({\n          ...activeGroup,\n          invitations: isManager ? getStoreState().invitations.invitations : [],\n          memberships: getStoreState().memberships.memberships,\n        } as Group);\n        actions.setError({\n          type: RequestType.setSelectedGroup,\n          value: undefined,\n        });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.setSelectedGroup,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        const { moments, goals, memberships, invitations } = getStoreActions();\n\n        /* UPDATE STALE VALUES */\n        Promise.all(\n          [moments, goals, memberships, invitations].map((model) =>\n            model.setRequestTimestamps({\n              type: RequestTimestamp.stale,\n              value: Date.now(),\n            })\n          )\n        );\n\n        actions.setStatus({ type: RequestType.setSelectedGroup, value: Status.complete });\n      }\n    }\n  ),\n\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  fetchAudiences = 'fetchAudiences',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { PersistConfig } from 'easy-peasy';\n\nimport state, { IGroupModelState } from './state';\nimport actions, { IGroupModelActions } from './actions';\nimport thunks, { IGroupModelThunks } from './thunks';\nimport listeners, { IGroupModelListeners } from './listeners';\n\nexport interface IGroupModel\n  extends IGroupModelState,\n    IGroupModelActions,\n    IGroupModelThunks,\n    IGroupModelListeners {}\n\nexport const persistConfig: PersistConfig<IGroupModel> = {\n  storage: 'localStorage',\n  allow: ['groups', 'selectedGroup', 'selectedGroupId', 'organizations', 'orphanGroups'],\n};\n\nconst groupModel: IGroupModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default groupModel;\n","import { computed, Computed } from 'easy-peasy';\n\nimport { Locales } from './model';\nimport { Environment, Language, Theme } from 'types/settings';\n\nexport interface ISettingsModelState {\n  language: Language;\n  locale: Computed<ISettingsModelState, Locale>;\n  theme: Theme;\n  env: Environment;\n}\n\nconst state: ISettingsModelState = {\n  language: Language.fi,\n  locale: computed(({ language }) => Locales[language]),\n  theme: Theme.light,\n  env: Environment.development,\n};\n\nexport default state;\n","import { Action, action } from 'easy-peasy';\n\nimport { ISettingsModel } from './model';\n\nimport { Language, Theme } from 'types/settings';\n\nexport interface ISettingsModelActions {\n  setLanguage: Action<ISettingsModel, Language>;\n  setTheme: Action<ISettingsModel, Theme>;\n}\n\nconst actions: ISettingsModelActions = {\n  setLanguage: action((state, payload) => {\n    state.language = payload;\n  }),\n\n  setTheme: action((state, payload) => {\n    state.theme = payload;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { ISettingsModel } from './model';\n\nimport { IStoreModel } from 'store';\n\nexport interface ISettingsModelListeners {\n  onSetLanguage: ThunkOn<ISettingsModel, void, IStoreModel>;\n}\n\nconst listeners: ISettingsModelListeners = {\n  onSetLanguage: thunkOn(\n    (actions) => [actions.setLanguage],\n    async (_, __, { getStoreActions }) => {\n      /* RESET LANGUAGE-DEPENDENT CONTENT */\n      const {\n        audiences: { setAudiences, setRawAudiences, setActiveAudienceSlug },\n        exercises: { setExercises },\n        strengths: { setStrengths, setPositiveCV, setXmasCalendar, setStartingLesson },\n      } = getStoreActions();\n\n      setAudiences([]);\n      setRawAudiences([]);\n      setActiveAudienceSlug(undefined);\n      setExercises([]);\n      setStrengths([]);\n      setPositiveCV(undefined);\n      setXmasCalendar(undefined);\n      setStartingLesson(undefined);\n    }\n  ),\n};\n\nexport default listeners;\n","import { PersistConfig } from 'easy-peasy';\nimport { enUS, fi } from 'date-fns/locale';\n\nimport state, { ISettingsModelState } from './state';\nimport actions, { ISettingsModelActions } from './actions';\nimport listeners, { ISettingsModelListeners } from './listeners';\n\nimport { Language } from 'types/settings';\n\nexport const Locales: { [lang in Language]: Locale } = {\n  [Language.en]: enUS,\n  [Language.fi]: fi,\n};\n\nexport const persistConfig: PersistConfig<ISettingsModel> = {\n  storage: 'localStorage',\n  allow: ['theme', 'language'],\n};\n\nexport interface ISettingsModel\n  extends ISettingsModelState,\n    ISettingsModelActions,\n    ISettingsModelListeners {}\n\nconst settingsModel: ISettingsModel = {\n  ...state,\n  ...actions,\n  ...listeners,\n};\n\nexport default settingsModel;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IAudienceModel } from './model';\n\nimport { Audience } from 'types/audience';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IAudienceModelActions {\n  setActiveAudienceSlug: Action<IAudienceModel, string | undefined>;\n  setAudiences: Action<IAudienceModel, Audience[]>;\n  setError: Action<\n    IAudienceModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setRawAudiences: Action<IAudienceModel, Audience[]>;\n  setRequestTimestamps: Action<IAudienceModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IAudienceModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IAudienceModelActions = {\n  setActiveAudienceSlug: action((state, payload) => {\n    state.activeAudienceSlug = payload;\n  }),\n\n  setAudiences: action((state, payload) => {\n    state.audiences = payload;\n  }),\n\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setRawAudiences: action((state, payload) => {\n    state.rawAudiences = payload;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IAudienceModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IAudienceModelListeners {\n  onSetStatus: ThunkOn<IAudienceModel, IStoreModel>;\n}\n\nconst listeners: IAudienceModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { Audience, AudienceResponse } from 'types/audience';\nimport { Language } from 'types/settings';\n\nexport const formatAudiencesResponse = (audiences: AudienceResponse[]): Audience[] =>\n  audiences.map((audience: AudienceResponse) => ({\n    id: audience._id,\n    live: audience.live,\n    name: audience.name,\n    slug: audience.slug,\n    numExercises: audience.numExercises,\n  }));\n\nexport const defaultAudiences: Record<Language, string> = {\n  fi: 'students-v2',\n  en: 'students-v1',\n};\n\nexport const filterProductionAudiences = (audiences: Audience[], defaultAudienceSlug: string) =>\n  audiences.filter(\n    (audience: Audience) =>\n      (!audience.slug.startsWith('students-') || audience.slug === defaultAudienceSlug) &&\n      audience.numExercises > 0\n  );\n","export const findItemInArray = (data: any[], key: string, value: string) =>\n  data.find((item: any) => item[key] === value);\n","import { computed, Computed } from 'easy-peasy';\n\nimport { defaultAudiences } from './helpers';\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { IStoreModel } from 'store';\n\nimport { Audience } from 'types/audience';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Language } from 'types/settings';\nimport { Status } from 'types/status';\nimport { findItemInArray } from 'utils/findItemInArray';\n\nexport interface IAudienceModelState {\n  error: RequestTypeToError;\n  audiences: Audience[];\n  activeAudience: Computed<IAudienceModelState, Audience>;\n  activeAudienceSlug?: string;\n  defaultAudienceSlug: Computed<IAudienceModelState, string, IStoreModel>;\n  rawAudiences: Audience[];\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n}\n\nconst state: IAudienceModelState = {\n  error: {},\n  audiences: [],\n  activeAudience: computed((state) =>\n    findItemInArray(\n      state.rawAudiences,\n      'slug',\n      state?.activeAudienceSlug || state.defaultAudienceSlug\n    )\n  ),\n  activeAudienceSlug: defaultAudiences[Language.fi],\n  defaultAudienceSlug: computed(\n    [(_, storeState) => storeState.settings.language],\n    (language) => defaultAudiences[language]\n  ),\n  rawAudiences: [],\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import { Thunk, thunk } from 'easy-peasy';\n\nimport { IAudienceModel } from './model';\nimport { fetchAudiencesQuery } from './queries';\nimport { RequestType } from './requests';\nimport { formatAudiencesResponse, filterProductionAudiences } from './helpers';\nimport { FetchAudiencesPayload } from './payloads';\n\nimport { IStoreModel } from 'store';\nimport { AudienceResponse, Audience } from 'types/audience';\nimport { RequestTimestamp } from 'types/request';\nimport { Environment } from 'types/settings';\nimport { Status } from 'types/status';\n\nexport interface IAudienceModelThunks {\n  fetchAudiences: Thunk<IAudienceModel, FetchAudiencesPayload, void, IStoreModel>;\n}\n\nconst thunks: IAudienceModelThunks = {\n  fetchAudiences: thunk(async (actions, payload, { getState, getStoreState, getStoreActions }) => {\n    actions.setStatus({ type: RequestType.fetchAudiences, value: Status.loading });\n    await getStoreActions().auth.silentRefresh();\n\n    const {\n      sanity: { sanityClient },\n      settings: { env, language },\n    } = getStoreState();\n\n    try {\n      const audiences: AudienceResponse[] = await sanityClient.fetch(fetchAudiencesQuery, {\n        language: payload || language,\n      });\n      const formattedAudiences: Audience[] = formatAudiencesResponse(audiences);\n      let productionAudiences = [...formattedAudiences];\n      const defaultAudienceSlug = getState().defaultAudienceSlug;\n\n      if (env === Environment.production) {\n        productionAudiences = filterProductionAudiences(formattedAudiences, defaultAudienceSlug);\n      }\n\n      actions.setRawAudiences(formattedAudiences);\n      actions.setAudiences(productionAudiences);\n      actions.setActiveAudienceSlug(defaultAudienceSlug);\n      actions.setError({ type: RequestType.fetchAudiences, value: undefined });\n    } catch (error) {\n      actions.setError({\n        type: RequestType.fetchAudiences,\n        value: { error, status: error.response?.status },\n      });\n    } finally {\n      actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n      actions.setStatus({ type: RequestType.fetchAudiences, value: Status.complete });\n    }\n  }),\n};\n\nexport default thunks;\n","import { persist } from 'easy-peasy';\n\nimport actions, { IAudienceModelActions } from './actions';\nimport listeners, { IAudienceModelListeners } from './listeners';\nimport state, { IAudienceModelState } from './state';\nimport thunks, { IAudienceModelThunks } from './thunks';\n\nexport interface IAudienceModel\n  extends IAudienceModelActions,\n    IAudienceModelListeners,\n    IAudienceModelState,\n    IAudienceModelThunks {}\n\nconst audienceModel: IAudienceModel = persist(\n  {\n    ...actions,\n    ...listeners,\n    ...state,\n    ...thunks,\n  },\n  {\n    storage: 'localStorage',\n    allow: ['activeAudienceSlug'],\n  }\n);\n\nexport default audienceModel;\n","import { Action, action } from 'easy-peasy';\n\nimport { IAuthModel } from './model';\nimport { RequestType } from './requests';\nimport { Status } from 'types/status';\n\nexport interface IAuthModelActions {\n  setError: Action<\n    IAuthModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setIdToken: Action<IAuthModel, string | undefined>;\n  setIdTokenExpiresAt: Action<IAuthModel, number | undefined>;\n  setIsInitialized: Action<IAuthModel, boolean>;\n  setRequest: Action<IAuthModel, { type: RequestType; value: Promise<undefined> | undefined }>;\n  setSessionExpiresAt: Action<IAuthModel, number | undefined>;\n  setStatus: Action<IAuthModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IAuthModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setIdToken: action((state, payload) => {\n    state.idToken = payload;\n  }),\n\n  setIdTokenExpiresAt: action((state, payload) => {\n    state.idTokenExpiresAt = payload;\n  }),\n\n  setIsInitialized: action((state, payload) => {\n    state.isInitialized = payload;\n  }),\n\n  setRequest: action((state, payload) => {\n    state.request[payload.type] = payload.value;\n  }),\n\n  setSessionExpiresAt: action((state, payload) => {\n    state.sessionExpiresAt = payload;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IAuthModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IAuthModelListeners {\n  onSetStatus: ThunkOn<IAuthModel, IStoreModel>;\n}\n\nconst listeners: IAuthModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  authenticate = 'authenticate',\n  initialize = 'initialize',\n  logout = 'logout',\n  postIdToken = 'postIdToken',\n  refresh = 'refresh',\n  silentRefresh = 'silentRefresh',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\n\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  fetchExercises = 'fetchExercises',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { Language } from './settings';\n\ntype ExerciseBase = {\n  description: string;\n  duration: string;\n  language: Language;\n  section: string;\n  showCover: boolean;\n  slides: Slide[];\n  slug: string;\n  teacherNotes: TeacherNote[];\n  title: string;\n  type: string;\n};\nexport type ExerciseResponse = ExerciseBase & {\n  _id: string;\n  orderNumber: number;\n};\n\nexport type Exercise = ExerciseBase & {\n  id: string;\n};\n\nexport type Slide = {\n  _key: string;\n  _type: string;\n  body: SlideBody;\n  image: SlideImage;\n};\n\ntype SlideBody = {\n  _key: string;\n  _type: string;\n  children?: SlideBodyChild[];\n  markDefs?: MarkDef[];\n  style?: string;\n  url?: string;\n};\n\ntype MarkDef = {\n  _key: string;\n  _type: string;\n  exerciseSlug: string;\n  reference: Ref;\n  strengthSlug: string;\n};\n\ntype Ref = {\n  _ref: string;\n  _type: string;\n};\n\ntype SlideBodyChild = {\n  _key: string;\n  _type: string;\n  marks: [];\n  text: string;\n  level?: number;\n  listItem?: string;\n};\n\ntype SlideImage = {\n  _type: string;\n  asset: Asset;\n};\n\ntype Asset = {\n  _ref: string;\n  _type: string;\n};\n\nexport type TeacherNote = {\n  _key: string;\n  _styled: string;\n  _type: string;\n  children: TeacherNoteChild[];\n  markDefs: [];\n};\n\ntype TeacherNoteChild = {\n  _key: string;\n  _type: string;\n  marks: string[];\n  text: string;\n};\n\nexport type ExerciseSection = {\n  exercises: Exercise[];\n  key: string;\n};\n\nexport enum ExerciseSectionTitle {\n  additionalExercises = 'ADDITIONAL_EXERCISES',\n  basics = 'BASICS',\n  christmasCalendar = 'CHRISTMAS_CALENDAR',\n  exercises = 'EXERCISES',\n  firstLesson = 'FIRST_LESSON',\n  forTeacher = 'FOR_TEACHER',\n  homework = 'HOMEWORK',\n  quickExercises = 'QUICK_EXERCISES',\n}\n\nexport enum ExerciseSectionKey {\n  additionalExercises = 'additional_exercises',\n  basics = 'basics',\n  christmasCalendar = 'xmas_doors',\n  exercises = 'exercises',\n  firstLesson = 'first_lesson',\n  forTeacher = 'for_teacher',\n  homework = 'homework',\n  quickExercises = 'quick_exercises',\n}\n","import { computed, Computed } from 'easy-peasy';\n\nimport { RequestType, RequestTypeToError, RequestTypeToStatus } from './requests';\nimport { Status } from 'types/status';\n\nexport interface IAuthModelState {\n  error: RequestTypeToError;\n  idToken?: string;\n  idTokenExpiresAt?: number;\n  idTokenExpiresIn: Computed<IAuthModelState, () => number | undefined>;\n  isInitialized?: boolean;\n  sessionExpiresAt?: number;\n  sessionExpiresIn: Computed<IAuthModelState, () => number | undefined>;\n  request: Partial<Record<RequestType, Promise<undefined> | undefined>>;\n  status: RequestTypeToStatus;\n}\n\nconst state: IAuthModelState = {\n  error: {},\n  idToken: undefined,\n  idTokenExpiresAt: undefined,\n  idTokenExpiresIn: computed((state) => () =>\n    state.idTokenExpiresAt !== undefined\n      ? Math.floor((state.idTokenExpiresAt * 1000 - Date.now()) / 1000)\n      : undefined\n  ),\n  isInitialized: false,\n  sessionExpiresAt: undefined,\n  sessionExpiresIn: computed((state) => () =>\n    state.sessionExpiresAt !== undefined\n      ? Math.floor((state.sessionExpiresAt * 1000 - Date.now()) / 1000)\n      : undefined\n  ),\n  request: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: undefined }),\n    {}\n  ),\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import actions, { IAuthModelActions } from './actions';\nimport listeners, { IAuthModelListeners } from './listeners';\nimport state, { IAuthModelState } from './state';\nimport thunks, { IAuthModelThunks } from './thunks';\n\nexport interface IAuthModel\n  extends IAuthModelActions,\n    IAuthModelListeners,\n    IAuthModelState,\n    IAuthModelThunks {}\n\nconst authModel: IAuthModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default authModel;\n","import { AxiosInstance } from 'axios';\nimport { Thunk, thunk } from 'easy-peasy';\n\nimport { IAuthModel } from './model';\nimport { IStoreModel } from 'store';\nimport { Language } from 'types/settings';\nimport { RequestType } from './requests';\nimport { Status } from 'types/status';\nimport { User, UserResponse } from 'types/user';\nimport { formatUserResponse } from 'models/user/helpers';\nimport { paths } from 'api';\n\nexport type PostIdTokenPayload = { idToken: string; language: Language };\nexport type RequestCodePayload = { clientId: string; domain: string; redirectUri: string };\nexport type RequestTokensPayload = {\n  code?: string;\n  refreshToken?: string;\n  clientId: string;\n  domain: string;\n  redirectUri?: string;\n};\n\nexport interface IAuthModelThunks {\n  authenticate: Thunk<IAuthModel, undefined, any, IStoreModel>;\n  initialize: Thunk<IAuthModel, undefined, any, IStoreModel>;\n  logout: Thunk<IAuthModel, undefined, any, IStoreModel>;\n  postIdToken: Thunk<IAuthModel, PostIdTokenPayload, { client: AxiosInstance }, IStoreModel>;\n  refresh: Thunk<IAuthModel, undefined, any, IStoreModel>;\n  requestCode: Thunk<IAuthModel, RequestCodePayload, any, IStoreModel>;\n  requestTokens: Thunk<IAuthModel, RequestTokensPayload, any, IStoreModel>;\n  silentRefresh: Thunk<IAuthModel, undefined, any, IStoreModel>;\n}\n\nconst thunks: IAuthModelThunks = {\n  authenticate: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n  initialize: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n  logout: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n\n  postIdToken: thunk(\n    async (\n      actions,\n      payload,\n      { getState, getStoreActions, getStoreState, injections: { client } }\n    ) => {\n      if (getState().status.postIdToken !== Status.idle) return;\n\n      actions.setStatus({ type: RequestType.postIdToken, value: Status.loading });\n\n      try {\n        const user: User | undefined = await client\n          .post(paths.session.postIdToken({ language: payload.language }), undefined, {\n            headers: { Authorization: 'Bearer ' + payload.idToken },\n          })\n          .then((response: { data: UserResponse }): User | undefined => {\n            return response?.data ? formatUserResponse(response.data) : undefined;\n          });\n\n        if (!user) {\n          throw new Error('Id token post request response is invalid.');\n        }\n\n        actions.setSessionExpiresAt(Math.floor(Date.now() / 1000 + 20 * 60));\n\n        if (!getStoreState().user.user) {\n          getStoreActions().user.setUser(user);\n        }\n\n        actions.setError({ type: RequestType.postIdToken, value: undefined });\n      } catch (error) {\n        getStoreActions().user.setUser(undefined);\n\n        actions.setError({\n          type: RequestType.postIdToken,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setStatus({ type: RequestType.postIdToken, value: Status.complete });\n      }\n    }\n  ),\n\n  refresh: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n  requestCode: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n  requestTokens: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n  silentRefresh: thunk(async () => console.log('This is a no-op, to be declared in UI package.')),\n};\n\nexport default thunks;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IExerciseModel } from './model';\n\nimport { Exercise } from 'types/exercise';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IExerciseModelActions {\n  setActiveExerciseSlug: Action<IExerciseModel, string | undefined>;\n  setError: Action<\n    IExerciseModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setExercises: Action<IExerciseModel, Exercise[]>;\n  setRequestTimestamps: Action<IExerciseModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IExerciseModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IExerciseModelActions = {\n  setActiveExerciseSlug: action((state, payload) => {\n    state.activeExerciseSlug = payload;\n  }),\n\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setExercises: action((state, payload) => {\n    state.exercises = payload;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IExerciseModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IExerciseModelListeners {\n  onSetStatus: ThunkOn<IExerciseModel, IStoreModel>;\n}\n\nconst listeners: IExerciseModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  createGoal = 'createGoal',\n  editGoal = 'editGoal',\n  deleteGoal = 'deleteGoal',\n  fetchGoals = 'fetchGoals',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","export const isDraftID = (id?: string): boolean => {\n  if (!id) {\n    throw new Error(\n      'isDraftID called with no id. This is likely caused by the GROQ query not including _id'\n    );\n  }\n  return id.startsWith('drafts.');\n};\n","import { computed, Computed } from 'easy-peasy';\n\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\nimport { formatExerciseSections } from './helpers';\n\nimport { Exercise, ExerciseSection } from 'types/exercise';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\nimport { findItemInArray } from 'utils/findItemInArray';\n\nexport interface IExerciseModelState {\n  error: RequestTypeToError;\n  activeExercise: Computed<IExerciseModelState, Exercise>;\n  activeExerciseSlug?: string;\n  exercises: Exercise[];\n  exerciseSections: Computed<IExerciseModelState, ExerciseSection[]>;\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n}\n\nconst state: IExerciseModelState = {\n  error: {},\n  activeExercise: computed(\n    (state) =>\n      state.activeExerciseSlug && findItemInArray(state.exercises, 'slug', state.activeExerciseSlug)\n  ),\n  activeExerciseSlug: undefined,\n  exercises: [],\n  exerciseSections: computed((state) => formatExerciseSections(state.exercises)),\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import { groupBy } from 'lodash';\n\nimport {\n  Exercise,\n  ExerciseResponse,\n  ExerciseSection,\n  ExerciseSectionTitle,\n  ExerciseSectionKey,\n} from 'types/exercise';\nimport { isDraftID } from 'utils/isDraftID';\n\nexport const formatExercisesResponse = (\n  exercises: ExerciseResponse[],\n  verboseContent: boolean\n): Exercise[] =>\n  exercises.map((exercise: ExerciseResponse) => {\n    const isDraft = isDraftID(exercise._id);\n\n    const formattedExercise: Exercise & { _id?: string } = {\n      ...exercise,\n      id: exercise._id,\n      slug: isDraft ? `draft-version-${exercise.slug}` : exercise.slug,\n      title: isDraft && verboseContent ? `${exercise.title} [DRAFT]` : exercise.title,\n    };\n\n    delete formattedExercise._id;\n    return formattedExercise;\n  });\n\nexport const formatExerciseSections = (exercises: Exercise[]): ExerciseSection[] => {\n  const exercisesBySection = groupBy(exercises, (exercise) => exercise.section);\n\n  const teacher = exercisesBySection[ExerciseSectionTitle.forTeacher];\n  const basic =\n    exercisesBySection[ExerciseSectionTitle.basics] ||\n    exercisesBySection[ExerciseSectionTitle.firstLesson];\n  const exercise =\n    exercisesBySection[ExerciseSectionTitle.exercises] ||\n    exercisesBySection[ExerciseSectionTitle.additionalExercises];\n  const quickExercise = exercisesBySection[ExerciseSectionTitle.quickExercises];\n  const homework = exercisesBySection[ExerciseSectionTitle.homework];\n  const christmas = exercisesBySection[ExerciseSectionTitle.christmasCalendar];\n\n  return [\n    {\n      key: ExerciseSectionKey.forTeacher,\n      exercises: teacher,\n    },\n    {\n      key: ExerciseSectionKey.basics,\n      exercises: basic,\n    },\n    {\n      key: ExerciseSectionKey.exercises,\n      exercises: exercise,\n    },\n    {\n      key: ExerciseSectionKey.quickExercises,\n      exercises: quickExercise,\n    },\n    {\n      key: ExerciseSectionKey.homework,\n      exercises: homework,\n    },\n    {\n      key: ExerciseSectionKey.christmasCalendar,\n      exercises: christmas,\n    },\n  ].filter((section) => section.exercises);\n};\n","import { Thunk, thunk } from 'easy-peasy';\n\nimport { formatExercisesResponse } from './helpers';\nimport { IExerciseModel } from './model';\nimport { fetchExercisesQuery } from './queries';\nimport { RequestType } from './requests';\nimport { FetchExercisesPayload, FindExercisePayload } from './payloads';\n\nimport { IStoreModel } from 'store';\n\nimport { Exercise, ExerciseResponse } from 'types/exercise';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IExerciseModelThunks {\n  fetchExercises: Thunk<IExerciseModel, FetchExercisesPayload, void, IStoreModel>;\n  findExercise: Thunk<IExerciseModel, FindExercisePayload>;\n}\n\nconst thunks: IExerciseModelThunks = {\n  fetchExercises: thunk(async (actions, payload, { getStoreActions, getStoreState }) => {\n    actions.setStatus({ type: RequestType.fetchExercises, value: Status.loading });\n    await getStoreActions().auth.silentRefresh();\n\n    const {\n      audiences: { activeAudienceSlug, defaultAudienceSlug },\n      sanity: { sanityClient, verboseContent },\n      settings: { language },\n      strengths: { activeStrength },\n    } = getStoreState();\n    try {\n      const exercises: ExerciseResponse[] = await sanityClient.fetch(fetchExercisesQuery, {\n        language: payload?.language || language,\n        strengthSlug: payload?.strengthSlug || activeStrength?.slug,\n        audienceSlug: payload?.audienceSlug || activeAudienceSlug || defaultAudienceSlug,\n      });\n\n      const formattedExercises = formatExercisesResponse(exercises, verboseContent);\n      actions.setExercises(formattedExercises);\n      actions.setError({ type: RequestType.fetchExercises, value: undefined });\n    } catch (error) {\n      actions.setError({\n        type: RequestType.fetchExercises,\n        value: { error, status: error.response?.status },\n      });\n    } finally {\n      actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n      actions.setStatus({ type: RequestType.fetchExercises, value: Status.complete });\n    }\n  }),\n\n  findExercise: thunk(\n    async (_, payload, { getState }): Promise<Exercise | undefined> => {\n      const { exercises } = getState();\n      return exercises.find((exercise: Exercise) => exercise.slug === payload.slug);\n    }\n  ),\n};\n\nexport default thunks;\n","import actions, { IExerciseModelActions } from './actions';\nimport listeners, { IExerciseModelListeners } from './listeners';\nimport state, { IExerciseModelState } from './state';\nimport thunks, { IExerciseModelThunks } from './thunks';\n\nexport interface IExerciseModel\n  extends IExerciseModelActions,\n    IExerciseModelListeners,\n    IExerciseModelState,\n    IExerciseModelThunks {}\n\nconst exerciseModel: IExerciseModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default exerciseModel;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IGoalModel } from './model';\n\nimport { Goal } from 'types/goal';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGoalModelActions {\n  setError: Action<\n    IGoalModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setFirstGoalFlag: Action<IGoalModel, boolean>;\n  setGoals: Action<IGoalModel, Goal[]>;\n  setRequestTimestamps: Action<IGoalModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IGoalModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IGoalModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setFirstGoalFlag: action((state, payload) => {\n    state.firstGoalFlag = payload;\n  }),\n\n  setGoals: action((state, payload) => {\n    state.goals = payload;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IGoalModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IGoalModelListeners {\n  onSetStatus: ThunkOn<IGoalModel, IStoreModel>;\n}\n\nconst listeners: IGoalModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { Goal } from 'types/goal';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGoalModelState {\n  error: RequestTypeToError;\n  firstGoalFlag: boolean;\n  goals: Goal[];\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n}\n\nconst state: IGoalModelState = {\n  error: {},\n  firstGoalFlag: false,\n  goals: [],\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import { GoalResponse, Goal } from 'types/goal';\n\nexport const formatGoalResponse = (goal: GoalResponse): Goal => ({\n  modifiedAt: goal.ModifiedAt,\n  createdAt: goal.CreatedAt,\n  id: goal.ID,\n  actTargetCount: goal.ActTargetCount,\n  creatorId: goal.CreatorID,\n  groupId: goal.GroupID,\n  actTemplates: goal.ActTemplates?.map((template) => ({\n    text: template.Text,\n    strengthSlug: template.StrengthSlug,\n  })),\n});\n","import actions, { IGoalModelActions } from './actions';\nimport listeners, { IGoalModelListeners } from './listeners';\nimport state, { IGoalModelState } from './state';\nimport thunks, { IGoalModelThunks } from './thunks';\n\nexport interface IGoalModel\n  extends IGoalModelActions,\n    IGoalModelListeners,\n    IGoalModelState,\n    IGoalModelThunks {}\n\nconst goalModel: IGoalModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default goalModel;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  acceptInvitation = 'acceptInvitation',\n  deleteInvitation = 'deleteInvitation',\n  fetchInvitation = 'fetchInvitation',\n  fetchInvitations = 'fetchInvitations',\n  sendInvitation = 'sendInvitation',\n  resendInvitation = 'resendInvitation',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\n\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { AxiosInstance } from 'axios';\nimport { Thunk, thunk } from 'easy-peasy';\n\nimport { IGoalModel } from './model';\nimport { formatGoalResponse } from './helpers';\nimport { RequestType } from './requests';\nimport {\n  CreateGoalPayload,\n  DeleteGoalPayload,\n  EditGoalPayload,\n  FetchGoalsPayload,\n} from './payloads';\n\nimport { IStoreModel } from 'store';\nimport { paths } from 'api';\n\nimport { GoalResponse, Goal } from 'types/goal';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IGoalModelThunks {\n  createGoal: Thunk<IGoalModel, CreateGoalPayload, { client: AxiosInstance }, IStoreModel>;\n  deleteGoal: Thunk<IGoalModel, DeleteGoalPayload, { client: AxiosInstance }, IStoreModel>;\n  editGoal: Thunk<IGoalModel, EditGoalPayload, { client: AxiosInstance }, IStoreModel>;\n  fetchGoals: Thunk<IGoalModel, FetchGoalsPayload, { client: AxiosInstance }, IStoreModel>;\n}\n\nconst thunks: IGoalModelThunks = {\n  createGoal: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.createGoal, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const createdGoal = await client\n          .post(paths.goal.create({ groupId: payload.groupId }), {\n            ActTargetCount: payload.actTargetCount,\n            ActTemplates: payload.actTemplates,\n          })\n          .then(({ data }: { data: GoalResponse }): Goal => formatGoalResponse(data));\n\n        const { goals } = getState();\n        actions.setFirstGoalFlag(goals.length === 0);\n        actions.setGoals([createdGoal, ...goals]);\n        actions.setError({ type: RequestType.createGoal, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.createGoal,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.createGoal, value: Status.complete });\n      }\n    }\n  ),\n\n  deleteGoal: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.deleteGoal, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        await client.delete(paths.goal.delete(payload));\n\n        const { goals } = getState();\n        const updatedGoals = goals.filter((g) => g.id !== payload.goalId);\n\n        actions.setGoals(updatedGoals.length ? updatedGoals : []);\n        actions.setError({ type: RequestType.deleteGoal, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteGoal,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteGoal, value: Status.complete });\n      }\n    }\n  ),\n\n  editGoal: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.editGoal, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const editedGoal = await client\n          .put(paths.goal.edit({ groupId: payload.groupId, goalId: payload.goalId }), {\n            ActTargetCount: payload.actTargetCount,\n            ActTemplates: payload.actTemplates,\n          })\n          .then(({ data }: { data: GoalResponse }): Goal => formatGoalResponse(data));\n\n        const { goals } = getState();\n        const updatedGoals = [...goals];\n        const goalIndex = goals.findIndex((goal: Goal) => goal.id === payload.goalId);\n\n        updatedGoals[goalIndex] = editedGoal;\n\n        actions.setGoals(updatedGoals);\n        actions.setError({ type: RequestType.editGoal, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.editGoal,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.editGoal, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchGoals: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status[RequestType.fetchGoals] !== Status.idle) return;\n\n      actions.setStatus({ type: RequestType.fetchGoals, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const goals = await client\n          .get(paths.goals.get({ groupId: payload.groupId }), { clearCacheEntry: isCacheStale })\n          .then(({ data }: { data: GoalResponse[] }): Goal[] =>\n            data?.map((goal) => formatGoalResponse(goal))\n          );\n\n        actions.setGoals(goals || []);\n        actions.setError({ type: RequestType.fetchGoals, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchGoals,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: RequestType.fetchGoals, value: Status.complete });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import { CancelTokenSource } from 'axios';\nimport { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IInvitationModel } from './model';\n\nimport { Invitation } from 'types/invitation';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IInvitationModelActions {\n  setError: Action<\n    IInvitationModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setGroupInvitations: Action<IInvitationModel, Invitation[]>;\n  setInvitation: Action<IInvitationModel, Invitation>;\n  setRequest: Action<IInvitationModel, { type: RequestType; value: CancelTokenSource | undefined }>;\n  setRequestTimestamps: Action<IInvitationModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IInvitationModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IInvitationModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setGroupInvitations: action((state, payload) => {\n    state.invitations = payload;\n  }),\n\n  setInvitation: action((state, payload) => {\n    state.invitation = payload;\n  }),\n\n  setRequest: action((state, payload) => {\n    state.request[payload.type] = payload.value;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IInvitationModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IInvitationModelListeners {\n  onSetGroupInvitations?: ThunkOn<IInvitationModel, void, IStoreModel>;\n  onSetStatus: ThunkOn<IInvitationModel>;\n}\n\nconst listeners: IInvitationModelListeners = {\n  onSetGroupInvitations: thunkOn(\n    (actions) => actions.setGroupInvitations,\n    async (_, payload, { getStoreState, getStoreActions }) => {\n      const { selectedGroup } = getStoreState().groups;\n      if (!selectedGroup) return;\n\n      const updatedGroup = { ...selectedGroup, invitations: payload.payload };\n\n      getStoreActions().groups.setSelectedGroup(updatedGroup);\n    }\n  ),\n\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { CancelTokenSource } from 'axios';\n\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { Invitation } from 'types/invitation';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IInvitationModelState {\n  error: RequestTypeToError;\n  invitation?: Invitation;\n  invitations: Invitation[];\n  request: Partial<Record<RequestType, CancelTokenSource | undefined>>;\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n}\n\nconst state: IInvitationModelState = {\n  error: {},\n  invitation: undefined,\n  invitations: [],\n  request: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: undefined }),\n    {}\n  ),\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import { Thunk, thunk } from 'easy-peasy';\nimport axios, { AxiosInstance } from 'axios';\n\nimport { formatInvitationResponse } from './helpers';\nimport { IInvitationModel } from './model';\nimport { RequestType } from './requests';\nimport {\n  FetchInvitationPayload,\n  FetchGroupInvitationsPayload,\n  InviteMemberPayload,\n  DeleteInvitationPayload,\n  AcceptInvitationPayload,\n  ResendInvitationPayload,\n} from './payloads';\n\nimport { paths } from 'api';\nimport { IStoreModel } from 'store';\n\nimport { Invitation, InvitationResponse } from 'types/invitation';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IInvitationModelThunks {\n  acceptInvitation: Thunk<\n    IInvitationModel,\n    AcceptInvitationPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  deleteInvitation: Thunk<\n    IInvitationModel,\n    DeleteInvitationPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  fetchInvitation: Thunk<\n    IInvitationModel,\n    FetchInvitationPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  fetchInvitations: Thunk<\n    IInvitationModel,\n    FetchGroupInvitationsPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  sendInvitation: Thunk<\n    IInvitationModel,\n    InviteMemberPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  resendInvitation: Thunk<\n    IInvitationModel,\n    ResendInvitationPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n}\n\nconst thunks: IInvitationModelThunks = {\n  acceptInvitation: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.acceptInvitation !== Status.idle) return;\n      actions.setStatus({ type: RequestType.acceptInvitation, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        await client.post(paths.invitation.accept(payload));\n\n        actions.setError({ type: RequestType.acceptInvitation, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.acceptInvitation,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.acceptInvitation, value: Status.complete });\n      }\n    }\n  ),\n\n  deleteInvitation: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.deleteInvitation !== Status.idle) return;\n      actions.setStatus({ type: RequestType.deleteInvitation, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        await client.delete(paths.invitation.delete(payload));\n\n        const updatedInvitations = getState().invitations.filter(\n          (i) => i.id !== payload.invitationId\n        );\n\n        actions.setGroupInvitations(updatedInvitations);\n        actions.setError({ type: RequestType.deleteInvitation, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteInvitation,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteInvitation, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchInvitation: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.fetchInvitation !== Status.idle) return;\n      actions.setStatus({ type: RequestType.fetchInvitation, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const invitation = await client\n          .get(paths.invitation.get(payload), { clearCacheEntry: isCacheStale })\n          .then(\n            ({ data }: { data: InvitationResponse }): Invitation => formatInvitationResponse(data)\n          );\n\n        actions.setInvitation(invitation);\n        actions.setError({ type: RequestType.fetchInvitation, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchInvitation,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: RequestType.fetchInvitation, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchInvitations: thunk(\n    async (\n      actions,\n      payload,\n      { getState, getStoreState, getStoreActions, injections: { client } }\n    ) => {\n      const requestToken = getState().request.fetchInvitations;\n      if (requestToken) {\n        requestToken.cancel();\n      }\n\n      await getStoreActions().auth.silentRefresh();\n\n      const CancelToken = axios.CancelToken;\n      const tokenSource = CancelToken.source();\n\n      actions.setStatus({ type: RequestType.fetchInvitations, value: Status.loading });\n      actions.setRequest({ type: RequestType.fetchInvitations, value: tokenSource });\n\n      try {\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const data = await client\n          .get(paths.group.invitations.get(payload), {\n            cancelToken: tokenSource.token,\n            clearCacheEntry: isCacheStale,\n          })\n          .then(({ data }: { data: InvitationResponse[] }): Invitation[] =>\n            data.map((invite: InvitationResponse) => formatInvitationResponse(invite))\n          );\n\n        const { groups } = getStoreState().groups;\n        const updatedGroup = groups?.find((g) => g.id === payload.groupId);\n\n        actions.setGroupInvitations(\n          updatedGroup?.invitations ? [...updatedGroup.invitations, ...data] : data\n        );\n\n        actions.setError({ type: RequestType.fetchInvitations, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchInvitations,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: RequestType.fetchInvitations, value: Status.complete });\n      }\n    }\n  ),\n\n  sendInvitation: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.sendInvitation !== Status.idle) return;\n      actions.setStatus({ type: RequestType.sendInvitation, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const invitation: Invitation = await client\n          .post(paths.group.memberships.post({ groupId: payload.groupId }), {\n            Email: payload.email,\n            Role: payload.role,\n            Type: payload.invitationType,\n          })\n          .then(\n            ({ data }: { data: InvitationResponse }): Invitation => formatInvitationResponse(data)\n          );\n\n        const { invitations } = getState();\n\n        actions.setGroupInvitations([...invitations, invitation]);\n        actions.setError({ type: RequestType.sendInvitation, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.sendInvitation,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.sendInvitation, value: Status.complete });\n      }\n    }\n  ),\n\n  resendInvitation: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.resendInvitation !== Status.idle) return;\n      actions.setStatus({ type: RequestType.resendInvitation, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        await client.post(paths.invitation.resend(payload));\n        actions.setError({ type: RequestType.resendInvitation, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.resendInvitation,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.resendInvitation, value: Status.complete });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import { persist } from 'easy-peasy';\n\nimport actions, { IInvitationModelActions } from './actions';\nimport listeners, { IInvitationModelListeners } from './listeners';\nimport state, { IInvitationModelState } from './state';\nimport thunks, { IInvitationModelThunks } from './thunks';\n\nexport interface IInvitationModel\n  extends IInvitationModelActions,\n    IInvitationModelListeners,\n    IInvitationModelState,\n    IInvitationModelThunks {}\n\nconst invitationModel: IInvitationModel = persist(\n  {\n    ...actions,\n    ...listeners,\n    ...state,\n    ...thunks,\n  },\n  {\n    storage: 'localStorage',\n    allow: ['invitations'],\n  }\n);\n\nexport default invitationModel;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  deleteMembership = 'deleteMembership',\n  editMembership = 'editMembership',\n  fetchMemberships = 'fetchMemberships',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\n\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { CancelTokenSource } from 'axios';\nimport { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IMembershipModel } from './model';\n\nimport { Membership } from 'types/membership';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMembershipModelActions {\n  setError: Action<\n    IMembershipModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setMemberships: Action<IMembershipModel, Membership[]>;\n  setRequest: Action<IMembershipModel, { type: RequestType; value: CancelTokenSource | undefined }>;\n  setRequestTimestamps: Action<IMembershipModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IMembershipModel, { type: RequestType; value: Status }>;\n}\n\nconst actions: IMembershipModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setMemberships: action((state, payload) => {\n    state.memberships = payload;\n  }),\n\n  setRequest: action((state, payload) => {\n    state.request[payload.type] = payload.value;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IMembershipModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IMembershipModelListeners {\n  onSetMemberships?: ThunkOn<IMembershipModel, void, IStoreModel>;\n  onSetStatus: ThunkOn<IMembershipModel, IStoreModel>;\n}\n\nconst listeners: IMembershipModelListeners = {\n  onSetMemberships: thunkOn(\n    (actions) => actions.setMemberships,\n    async (_, payload, { getStoreState, getStoreActions }) => {\n      const { selectedGroup } = getStoreState().groups;\n      if (!selectedGroup) return;\n\n      const updatedGroup = { ...selectedGroup, memberships: payload.payload };\n\n      getStoreActions().groups.setSelectedGroup(updatedGroup);\n    }\n  ),\n\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { CancelTokenSource } from 'axios';\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { Membership } from 'types/membership';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMembershipModelState {\n  error: RequestTypeToError;\n  memberships?: Membership[];\n  request: Partial<Record<RequestType, CancelTokenSource | undefined>>;\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n}\n\nconst state: IMembershipModelState = {\n  error: {},\n  memberships: [],\n  request: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: undefined }),\n    {}\n  ),\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n};\n\nexport default state;\n","import axios, { AxiosInstance } from 'axios';\nimport { Thunk, thunk } from 'easy-peasy';\n\nimport { IMembershipModel } from './model';\nimport { formatMembershipsResponse, formatMembershipResponse } from './helpers';\nimport { RequestType } from './requests';\nimport {\n  FetchMembershipsPayload,\n  EditMembershipPayload,\n  DeleteMembershipPayload,\n} from './payloads';\n\nimport { IStoreModel } from 'store';\nimport { paths } from 'api';\n\nimport { MembershipResponse, Membership } from 'types/membership';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMembershipModelThunks {\n  deleteMembership: Thunk<\n    IMembershipModel,\n    DeleteMembershipPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  editMembership: Thunk<\n    IMembershipModel,\n    EditMembershipPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  fetchMemberships: Thunk<\n    IMembershipModel,\n    FetchMembershipsPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n}\n\nconst thunks: IMembershipModelThunks = {\n  deleteMembership: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.deleteMembership !== Status.idle) return;\n      actions.setStatus({ type: RequestType.deleteMembership, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        await client\n          .delete(\n            paths.group.memberships.delete({ groupId: payload.groupId, memberId: payload.memberId })\n          )\n          .then(\n            ({ data }: { data: MembershipResponse }): Membership => formatMembershipResponse(data)\n          );\n\n        const { memberships } = getState();\n        if (!memberships) return;\n\n        const updatedMemberships = memberships.filter((m) => m.user.id !== payload.memberId);\n\n        actions.setMemberships(updatedMemberships);\n        actions.setError({ type: RequestType.deleteMembership, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteMembership,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteMembership, value: Status.complete });\n      }\n    }\n  ),\n\n  editMembership: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.editMembership !== Status.idle) return;\n      actions.setStatus({ type: RequestType.editMembership, value: Status.loading });\n\n      await getStoreActions().auth.silentRefresh();\n\n      try {\n        const membership = await client\n          .put(\n            paths.group.memberships.edit({\n              groupId: payload.groupId,\n              memberId: payload.membership.user.id,\n            }),\n            { data: payload.membership }\n          )\n          .then(\n            ({ data }: { data: MembershipResponse }): Membership => formatMembershipResponse(data)\n          );\n\n        const { memberships } = getState();\n        if (!memberships) return;\n\n        const updatedMemberships = [...memberships];\n        const editIndex = updatedMemberships.findIndex((m) => m.id === membership.id);\n        updatedMemberships[editIndex] = membership;\n\n        actions.setMemberships(updatedMemberships);\n        actions.setError({ type: RequestType.editMembership, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.editMembership,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.editMembership, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchMemberships: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      const requestToken = getState().request.fetchMemberships;\n      if (requestToken) {\n        requestToken.cancel();\n      }\n\n      await getStoreActions().auth.silentRefresh();\n\n      const CancelToken = axios.CancelToken;\n      const tokenSource = CancelToken.source();\n\n      actions.setStatus({ type: RequestType.fetchMemberships, value: Status.loading });\n      actions.setRequest({ type: RequestType.fetchMemberships, value: tokenSource });\n\n      try {\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const memberships = await client\n          .get(paths.group.memberships.get(payload), {\n            cancelToken: tokenSource.token,\n            clearCacheEntry: isCacheStale,\n          })\n          .then(({ data }: { data: MembershipResponse[] }): Membership[] =>\n            formatMembershipsResponse(data)\n          );\n\n        actions.setMemberships(memberships);\n        actions.setError({ type: RequestType.fetchMemberships, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchMemberships,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setStatus({ type: RequestType.fetchMemberships, value: Status.complete });\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setRequest({ type: RequestType.fetchMemberships, value: undefined });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import { persist } from 'easy-peasy';\n\nimport actions, { IMembershipModelActions } from './actions';\nimport listeners, { IMembershipModelListeners } from './listeners';\nimport state, { IMembershipModelState } from './state';\nimport thunks, { IMembershipModelThunks } from './thunks';\n\nexport interface IMembershipModel\n  extends IMembershipModelActions,\n    IMembershipModelListeners,\n    IMembershipModelState,\n    IMembershipModelThunks {}\n\nconst membershipModel: IMembershipModel = persist(\n  {\n    ...actions,\n    ...listeners,\n    ...state,\n    ...thunks,\n  },\n  {\n    storage: 'localStorage',\n    allow: ['memberships'],\n  }\n);\n\nexport default membershipModel;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  createMoment = 'createMoment',\n  createMomentMedia = 'createMomentMedia',\n  deleteMoment = 'deleteMoment',\n  deleteMomentMedia = 'deleteMomentMedia',\n  editMoment = 'editMoment',\n  fetchMoments = 'fetchMoments',\n  fetchMoreMoments = 'fetchMoreMoments',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IMomentModel } from './model';\n\nimport { Moment } from 'types/moment';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMomentModelActions {\n  setCursor: Action<IMomentModel, string | undefined>;\n  setError: Action<\n    IMomentModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setFirstMomentFlag: Action<IMomentModel, boolean>;\n  setMoments: Action<IMomentModel, Moment[]>;\n  setRequestTimestamps: Action<IMomentModel, { type: RequestTimestamp; value: number }>;\n  setStatus: Action<IMomentModel, { type: RequestType; value: Status }>;\n  setTempMoments: Action<IMomentModel, any[]>;\n}\n\nconst actions: IMomentModelActions = {\n  setCursor: action((state, payload) => {\n    state.cursor = payload;\n  }),\n\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setFirstMomentFlag: action((state, payload) => {\n    state.firstMomentFlag = payload;\n  }),\n\n  setMoments: action((state, payload) => {\n    state.moments = payload;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n\n  setTempMoments: action((state, payload) => {\n    state.tempMoments = payload;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IMomentModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IMomentModelListeners {\n  onSetStatus: ThunkOn<IMomentModel, IStoreModel>;\n}\n\nconst listeners: IMomentModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { computed, Computed } from 'easy-peasy';\n\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { Moment, TempMoment } from 'types/moment';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMomentModelState {\n  cursor?: string;\n  error: RequestTypeToError;\n  firstMomentFlag: boolean;\n  moments: Moment[];\n  moreMomentsExist: Computed<IMomentModelState, boolean>;\n  requestTimestamps: RequestTimestampPayload;\n  status: RequestTypeToStatus;\n  tempMoments: TempMoment[];\n}\n\nconst state: IMomentModelState = {\n  cursor: undefined,\n  error: {},\n  firstMomentFlag: false,\n  moments: [],\n  moreMomentsExist: computed(({ cursor }) => !!cursor),\n  requestTimestamps: { fresh: 0, stale: 0 },\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n  tempMoments: [],\n};\n\nexport default state;\n","import { Path } from 'types/api';\nimport { Media, MediaResponse, Moment, ResponseMoment } from 'types/moment';\nimport { formatName } from 'utils/formatName';\n\nexport const formatSingleMomentResponse = (moment: ResponseMoment): Moment => ({\n  createdAt: new Date(moment.CreatedAt),\n  creatorId: moment.CreatorID,\n  creatorName: formatName(moment.Creator.GivenName, moment.Creator.FamilyName),\n  description: moment.Description,\n  groupId: moment.GroupID,\n  groupName: moment.Group.Name,\n  id: moment.ID,\n  mediaId: moment.MediaID,\n  mediaType: moment.MediaType,\n  mediaUrl: moment.MediaID && getMediaUrl(moment.MediaID),\n  strengthSlug: moment.StrengthSlug,\n  goalId: moment.GoalID,\n});\n\nexport const formatMomentsResponse = (moments: ResponseMoment[]): Moment[] =>\n  moments.map((moment: ResponseMoment) => formatSingleMomentResponse(moment));\n\nexport const formatMediaResponse = (media: MediaResponse): Media => ({\n  id: media.ID,\n  modifiedAt: media.ModifiedAt,\n  momentId: media.MomentID,\n  type: media.Type,\n  uploaderId: media.UploaderID,\n});\n\nexport const getMediaType = (blob: Blob): string | undefined => {\n  if (blob.type.includes('image')) return 'image';\n\n  return undefined;\n};\n\nexport const getMediaUrl = (mediaId: string) => `${Path.media}/${mediaId}`;\n","import { AxiosInstance } from 'axios';\nimport { Thunk, thunk } from 'easy-peasy';\n\nimport {\n  CreateMomentMediaPayload,\n  CreateMomentPayload,\n  DeleteMomentMediaPayload,\n  DeleteMomentPayload,\n  EditMomentPayload,\n  FetchMomentsPayload,\n} from './payloads';\nimport { IMomentModel } from './model';\nimport { RequestType } from './requests';\nimport {\n  formatMediaResponse,\n  formatMomentsResponse,\n  formatSingleMomentResponse,\n  getMediaType,\n  getMediaUrl,\n} from './helpers';\n\nimport { paths } from 'api';\nimport { IStoreModel } from 'store';\nimport {\n  Media,\n  MediaResponse,\n  Moment,\n  MomentResponse,\n  ResponseMoment,\n  TempMoment,\n} from 'types/moment';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\n\nexport interface IMomentModelThunks {\n  createMoment: Thunk<IMomentModel, CreateMomentPayload, { client: AxiosInstance }, IStoreModel>;\n  createMomentMedia: Thunk<\n    IMomentModel,\n    CreateMomentMediaPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  deleteMoment: Thunk<IMomentModel, DeleteMomentPayload, { client: AxiosInstance }, IStoreModel>;\n  deleteMomentMedia: Thunk<\n    IMomentModel,\n    DeleteMomentMediaPayload,\n    { client: AxiosInstance },\n    IStoreModel\n  >;\n  editMoment: Thunk<IMomentModel, EditMomentPayload, { client: AxiosInstance }, IStoreModel>;\n  fetchMoments: Thunk<IMomentModel, FetchMomentsPayload, { client: AxiosInstance }, IStoreModel>;\n}\n\nconst thunks: IMomentModelThunks = {\n  createMoment: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      actions.setStatus({ type: RequestType.createMoment, value: Status.loading });\n\n      const { moments } = getState();\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        let moment: Moment = await client\n          .post(paths.moment.create({ groupId: payload.groupId }), {\n            strengthSlug: payload.strengthSlug,\n            description: payload.description,\n            goalId: payload.goalId,\n          })\n          .then(({ data }: { data: ResponseMoment }): Moment => formatSingleMomentResponse(data));\n\n        if (payload.media) {\n          const response = await actions.createMomentMedia({ media: payload.media, moment });\n\n          if (response.mediaUrl) {\n            moment = response;\n          }\n        }\n\n        actions.setFirstMomentFlag(moments.length === 0);\n        actions.setMoments([moment, ...moments]);\n        actions.setError({ type: RequestType.createMoment, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.createMoment,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.createMoment, value: Status.complete });\n      }\n    }\n  ),\n\n  createMomentMedia: thunk(\n    async (\n      actions,\n      payload,\n      { getState, getStoreActions, injections: { client } }\n    ): Promise<Moment | void> => {\n      actions.setStatus({ type: RequestType.createMomentMedia, value: Status.loading });\n\n      const mediaType = getMediaType(payload.media);\n      if (!mediaType) return;\n\n      /* HANDLE TEMP MOMENT FOR BACKGROUND LOADING AND UI PROGRESS */\n      const { tempMoments } = getState();\n      const updatedTemp: TempMoment[] = [payload.moment, ...tempMoments];\n      let tempMomentIndex: number | undefined;\n\n      actions.setTempMoments(updatedTemp);\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        const formData = new FormData();\n        formData.append('file', payload.media);\n        formData.append('mediaType', mediaType);\n\n        /* POST MEDIA CONTENT */\n        const media: Media = await client\n          .post(paths.moment.media.create({ momentId: payload.moment.id }), formData, {\n            onUploadProgress: (progressEvent: any) => {\n              tempMomentIndex = updatedTemp.findIndex(\n                ({ id }): boolean => id === payload.moment.id\n              );\n              const progressTemp = Array.from(updatedTemp);\n\n              progressTemp[tempMomentIndex] = {\n                ...progressTemp[tempMomentIndex],\n                progress: Math.round((progressEvent.loaded * 100) / progressEvent.total),\n              };\n\n              actions.setTempMoments(progressTemp);\n            },\n          })\n          .then(({ data }: { data: MediaResponse }): Media => formatMediaResponse(data));\n\n        actions.setError({ type: RequestType.createMomentMedia, value: undefined });\n\n        return {\n          ...payload.moment,\n          mediaUrl: getMediaUrl(media.id),\n          mediaId: media.id,\n          mediaType: media.type,\n        };\n      } catch (error) {\n        return actions.setError({\n          type: RequestType.createMomentMedia,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        tempMomentIndex = updatedTemp.findIndex((tmp: TempMoment) => tmp.id === payload.moment.id);\n        updatedTemp.splice(tempMomentIndex, 1);\n\n        actions.setTempMoments(updatedTemp);\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.createMomentMedia, value: Status.complete });\n      }\n    }\n  ),\n\n  deleteMoment: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.deleteMoment !== Status.idle) return;\n      actions.setStatus({ type: RequestType.deleteMoment, value: Status.loading });\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        const { moments } = getState();\n        const updatedMoments = Array.from(moments);\n        const momentIndex = updatedMoments.findIndex(({ id }) => id === payload.momentId);\n        const moment = updatedMoments[momentIndex];\n\n        /* DELETE MEDIA */\n        if (moment.mediaId) {\n          await actions.deleteMomentMedia({ mediaId: moment.mediaId });\n        }\n\n        /* DELETE MOMENT */\n        await client.delete(\n          paths.moment.delete({ groupId: payload.groupId, momentId: payload.momentId })\n        );\n\n        updatedMoments.splice(momentIndex, 1);\n\n        actions.setMoments(updatedMoments);\n        actions.setError({ type: RequestType.deleteMoment, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteMoment,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteMoment, value: Status.complete });\n      }\n    }\n  ),\n\n  deleteMomentMedia: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.deleteMomentMedia !== Status.idle) return;\n      actions.setStatus({ type: RequestType.deleteMomentMedia, value: Status.loading });\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        await client.delete(paths.moment.media.delete(payload));\n\n        actions.setError({ type: RequestType.deleteMomentMedia, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.deleteMomentMedia,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.deleteMomentMedia, value: Status.complete });\n      }\n    }\n  ),\n\n  editMoment: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      if (getState().status.editMoment !== Status.idle) return;\n      actions.setStatus({ type: RequestType.editMoment, value: Status.loading });\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n\n        let moment = await client\n          .put(paths.moment.edit({ momentId: payload.momentId, groupId: payload.groupId }), {\n            strengthSlug: payload.strengthSlug,\n            description: payload.description,\n          })\n          .then(({ data }: { data: ResponseMoment }): Moment => formatSingleMomentResponse(data));\n\n        const { moments } = getState();\n        const updatedMoments = Array.from(moments);\n        const momentIndex = moments.findIndex((moment: Moment) => moment.id === payload.momentId);\n\n        if (moment.mediaId && (payload.mediaUrl === undefined || payload.media)) {\n          await actions.deleteMomentMedia({ mediaId: moment.mediaId });\n          moment = { ...moment, mediaUrl: undefined, mediaType: undefined, mediaId: undefined };\n        }\n\n        if (!!payload.media) {\n          moment = await actions.createMomentMedia({ media: payload.media, moment });\n        }\n\n        updatedMoments[momentIndex] = moment;\n\n        actions.setMoments(updatedMoments);\n        actions.setError({ type: RequestType.editMoment, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.editMoment,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.stale, value: Date.now() });\n        actions.setStatus({ type: RequestType.editMoment, value: Status.complete });\n      }\n    }\n  ),\n\n  fetchMoments: thunk(\n    async (actions, payload, { getState, getStoreActions, injections: { client } }) => {\n      const fetchRequestType =\n        payload.cursor && !payload.resetCursor\n          ? RequestType.fetchMoreMoments\n          : RequestType.fetchMoments;\n\n      if (getState().status[fetchRequestType] !== Status.idle) return;\n      actions.setStatus({ type: fetchRequestType, value: Status.loading });\n\n      if (payload.resetCursor) {\n        actions.setCursor(undefined);\n      }\n\n      try {\n        await getStoreActions().auth.silentRefresh();\n        const {\n          requestTimestamps: { fresh, stale },\n        } = getState();\n        const isCacheStale = fresh < stale;\n\n        const momentResponse: MomentResponse = await client\n          .get(\n            paths.moments.get({\n              ...payload,\n              cursor: payload.resetCursor ? undefined : payload.cursor,\n            }),\n            { clearCacheEntry: isCacheStale || payload.clearCacheEntry }\n          )\n          .then(({ data }: { data: MomentResponse }): MomentResponse => data);\n\n        const moments: Moment[] = formatMomentsResponse(momentResponse.Items);\n\n        if (payload.cursor) {\n          actions.setMoments([...getState().moments, ...moments]);\n        } else {\n          actions.setMoments(moments);\n        }\n        actions.setCursor(momentResponse.Cursor);\n        actions.setError({ type: fetchRequestType, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: fetchRequestType,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: fetchRequestType, value: Status.complete });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import actions, { IMomentModelActions } from './actions';\nimport listeners, { IMomentModelListeners } from './listeners';\nimport state, { IMomentModelState } from './state';\nimport thunks, { IMomentModelThunks } from './thunks';\n\nexport interface IMomentModel\n  extends IMomentModelActions,\n    IMomentModelListeners,\n    IMomentModelState,\n    IMomentModelThunks {}\n\nconst momentModel: IMomentModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default momentModel;\n","import { Status } from '../../types/status';\n\nexport enum RequestType {\n  fetchIllustrationUrl = 'fetchIllustrationUrl',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","export enum Dataset {\n  production = 'production',\n  development = 'development',\n}\n\nexport enum IllustrationSlug {\n  fairness = 'fairness',\n  joy = 'joy',\n  start = 'start',\n}\n\nexport type SanityImageSource = {\n  _type: string;\n  asset: SanityImageAsset;\n};\n\nexport type SanityImageAsset = {\n  _ref: string;\n  _type: string;\n};\n","import { Language } from 'types/settings';\nimport { SanityImageSource } from './sanity';\n\nexport type StrengthResponse = StrengthBase & {\n  _id: string;\n  backgroundColor: string;\n  goalTemplates: GoalTemplateResponse[];\n  language: Language;\n};\n\nexport type Strength = StrengthBase & {\n  color: string;\n  goalTemplates: GoalTemplate[];\n  isDraft: boolean;\n};\n\ntype StrengthBase = {\n  description: string;\n  imageAsset: SanityImageSource;\n  live: Live;\n  name: string;\n  numExercises: number;\n  slug: StrengthSlug;\n};\n\nexport type GoalTemplateResponse = GoalTemplateBase & {\n  _id: string;\n  goalText: string;\n};\n\nexport type GoalTemplate = GoalTemplateBase & {\n  id: string;\n  isDraft: boolean;\n  name: string;\n};\n\ntype GoalTemplateBase = {\n  actions: string[];\n  slug: string;\n};\n\nexport type Live = {\n  _type: string;\n  inSeeTheGood: boolean;\n  inTeach: boolean;\n};\n\nexport enum StrengthSlug {\n  carefulness = 'carefulness',\n  compassion = 'compassion',\n  courage = 'courage',\n  creativity = 'creativity',\n  curiosity = 'curiosity',\n  enthusiasm = 'enthusiasm',\n  fairness = 'fairness',\n  forgiveness = 'forgiveness',\n  gratitude = 'gratitude',\n  grit = 'grit',\n  honesty = 'honesty',\n  hope = 'hope',\n  humour = 'humour',\n  judgement = 'judgement',\n  kindness = 'kindness',\n  leadership = 'leadership',\n  love = 'love',\n  loveOfBeauty = 'love-of-beauty',\n  loveOfLearning = 'love-of-learning',\n  modesty = 'modesty',\n  perseverance = 'perseverance',\n  perspective = 'perspective',\n  positiveCV = 'positive-cv',\n  selfRegulation = 'self-regulation',\n  socialIntelligence = 'social-intelligence',\n  spirituality = 'spirituality',\n  teamwork = 'teamwork',\n  xmasCalendar = 'xmas-calendar',\n}\n\nexport enum AttachmentType {\n  slidesPowerpoint = 'slidesPowerpoint',\n}\n","import { computed, Computed } from 'easy-peasy';\nimport client from '@sanity/client';\n\nimport { RequestType, RequestTypeToError, RequestTypeToStatus } from './requests';\n\nimport { Dataset } from 'types/sanity';\nimport { Status } from 'types/status';\n\nexport interface ISanityModelState {\n  dataset: Dataset;\n  error: RequestTypeToError;\n  project: string;\n  sanityClient: Computed<ISanityModelState, any>; // TODO: Manually type this client out\n  status: RequestTypeToStatus;\n  token?: string;\n  verboseContent: boolean;\n}\n\nconst state: ISanityModelState = {\n  dataset: Dataset.production,\n  error: {},\n  project: 'uxuhnfll',\n  sanityClient: computed((state) =>\n    client({\n      projectId: state.project,\n      dataset: state.dataset,\n      token: state.token,\n      useCdn: !state.token,\n      ignoreBrowserTokenWarning: true,\n    })\n  ),\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n  verboseContent: false,\n};\n\nexport default state;\n","import { Action, action } from 'easy-peasy';\n\nimport { ISanityModel } from './model';\nimport { RequestType } from './requests';\n\nimport { Dataset } from 'types/sanity';\nimport { Status } from 'types/status';\n\nexport interface ISanityModelActions {\n  setDataset: Action<ISanityModel, Dataset>;\n  setError: Action<\n    ISanityModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setStatus: Action<ISanityModel, { type: RequestType; value: Status }>;\n  setVerboseContent: Action<ISanityModel, boolean>;\n}\n\nconst actions: ISanityModelActions = {\n  setDataset: action((state, payload) => {\n    state.dataset = payload;\n  }),\n\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n\n  setVerboseContent: action((state, payload) => {\n    state.verboseContent = payload;\n  }),\n};\n\nexport default actions;\n","import { Thunk, thunk } from 'easy-peasy';\nimport ImageURLBuilder from '@sanity/image-url';\n\nimport { FetchIllustrationUrlPayload } from './payloads';\nimport { ISanityModel } from './model';\nimport { RequestType } from './requests';\nimport { fetchIllustrationUrlQuery } from './queries';\n\nimport { SanityImageSource } from 'types/sanity';\nimport { Status } from '../../types/status';\n\nexport interface ISanityModelThunks {\n  fetchIllustrationUrl: Thunk<ISanityModel, FetchIllustrationUrlPayload>;\n  getImageUrlBuilder: Thunk<ISanityModel, SanityImageSource>;\n}\n\nconst thunks: ISanityModelThunks = {\n  fetchIllustrationUrl: thunk(\n    async (actions, payload, { getState }): Promise<string | void | null> => {\n      actions.setStatus({ type: RequestType.fetchIllustrationUrl, value: Status.loading });\n\n      const { sanityClient } = getState();\n\n      try {\n        const sanityIllustration: SanityImageSource = await sanityClient.fetch(\n          fetchIllustrationUrlQuery,\n          {\n            slug: payload.slug,\n          }\n        );\n        const imageUrl = await actions\n          .getImageUrlBuilder(sanityIllustration)\n          .width(payload.width)\n          .height(payload.height)\n          .url();\n\n        actions.setError({ type: RequestType.fetchIllustrationUrl, value: undefined });\n        return imageUrl;\n      } catch (error) {\n        return actions.setError({\n          type: RequestType.fetchIllustrationUrl,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setStatus({ type: RequestType.fetchIllustrationUrl, value: Status.complete });\n      }\n    }\n  ),\n\n  getImageUrlBuilder: thunk((_, payload, { getState }): any => {\n    /* TODO: Manually type out the ImageBuilder */\n    return ImageURLBuilder(getState().sanityClient).image(payload);\n  }),\n};\n\nexport default thunks;\n","import { persist } from 'easy-peasy';\n\nimport state, { ISanityModelState } from './state';\nimport actions, { ISanityModelActions } from './actions';\nimport thunks, { ISanityModelThunks } from './thunks';\n\nexport interface ISanityModel extends ISanityModelState, ISanityModelActions, ISanityModelThunks {}\n\nconst sanityModel: ISanityModel = persist(\n  {\n    ...state,\n    ...actions,\n    ...thunks,\n  },\n  {\n    storage: 'localStorage',\n    allow: ['verboseContent'],\n  }\n);\n\nexport default sanityModel;\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IStrengthModel } from './model';\n\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\nimport { Strength, StrengthSlug } from 'types/strength';\n\nexport interface IStrengthModelActions {\n  setActiveStrengthSlug: Action<IStrengthModel, StrengthSlug | undefined>;\n  setError: Action<\n    IStrengthModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setPositiveCV: Action<IStrengthModel, Strength | undefined>;\n  setRequestTimestamps: Action<IStrengthModel, { type: RequestTimestamp; value: number }>;\n  setStartingLesson: Action<IStrengthModel, Strength | undefined>;\n  setStatus: Action<IStrengthModel, { type: RequestType; value: Status }>;\n  setStrengthPowerPointUrl: Action<IStrengthModel, string | undefined>;\n  setStrengths: Action<IStrengthModel, Strength[]>;\n  setXmasCalendar: Action<IStrengthModel, Strength | undefined>;\n}\n\nconst actions: IStrengthModelActions = {\n  setActiveStrengthSlug: action((state, payload) => {\n    state.activeStrengthSlug = payload;\n  }),\n\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setPositiveCV: action((state, payload) => {\n    state.positiveCV = payload;\n  }),\n\n  setRequestTimestamps: action((state, payload) => {\n    state.requestTimestamps[payload.type] = payload.value;\n  }),\n\n  setStartingLesson: action((state, payload) => {\n    state.startingLesson = payload;\n  }),\n\n  setStatus: action((state, payload) => {\n    state.status[payload.type] = payload.value;\n  }),\n\n  setStrengthPowerPointUrl: action((state, payload) => {\n    state.strengthPowerPointUrl = payload;\n  }),\n\n  setStrengths: action((state, payload) => {\n    state.strengths = payload;\n  }),\n\n  setXmasCalendar: action((state, payload) => {\n    state.xmasCalendar = payload;\n  }),\n};\n\nexport default actions;\n","import { ThunkOn, thunkOn } from 'easy-peasy';\n\nimport { IStrengthModel } from './model';\n\nimport { IStoreModel } from 'store';\nimport { Status } from 'types/status';\n\nexport interface IStrengthModelListeners {\n  onSetStatus: ThunkOn<IStrengthModel, IStoreModel>;\n}\n\nconst listeners: IStrengthModelListeners = {\n  onSetStatus: thunkOn(\n    (actions) => actions.setStatus,\n    (actions, target) => {\n      if (target.payload.value !== Status.complete) return;\n\n      /* After a status is set to 'complete', reset it to 'idle' */\n      actions.setStatus({ type: target.payload.type, value: Status.idle });\n    }\n  ),\n};\n\nexport default listeners;\n","import { Status } from 'types/status';\n\nexport enum RequestType {\n  fetchStrengths = 'fetchStrengths',\n  fetchStrengthAttachment = 'fetchStrengthAttachment',\n}\n\nexport type RequestTypeToError = Partial<\n  Record<RequestType, { error: Error; status: number } | undefined>\n>;\nexport type RequestTypeToStatus = Partial<Record<RequestType, Status>>;\n","import {\n  GoalTemplate,\n  GoalTemplateResponse,\n  Live,\n  Strength,\n  StrengthResponse,\n  StrengthSlug,\n} from 'types/strength';\nimport { Language } from 'types/settings';\nimport { isDraftID } from 'utils/isDraftID';\nimport { onlyKeepDrafts } from 'utils/onlyKeepDrafts';\n\nexport const formatStrengthsResponse = (\n  strengths: StrengthResponse[],\n  verboseContent: boolean\n): Strength[] =>\n  strengths.map((strength: StrengthResponse) => {\n    const strengthId = strength._id;\n    const isDraft = isDraftID(strengthId);\n    const formattedName = formatStrengthNames(\n      strength.name,\n      isDraft,\n      verboseContent,\n      strength.live\n    );\n\n    const enhancedStrength = {\n      id: strength._id,\n      color: strength.backgroundColor,\n      description: strength.description,\n      goalTemplates: strength.goalTemplates.map(\n        (goal: GoalTemplateResponse): GoalTemplate => {\n          const isDraft = isDraftID(goal._id);\n          const formattedName = formatStrengthNames(goal.goalText, isDraft, verboseContent);\n\n          return {\n            actions: goal.actions,\n            id: goal._id,\n            isDraft,\n            name: formattedName,\n            slug: goal.slug,\n          };\n        }\n      ),\n      imageAsset: strength.imageAsset,\n      isDraft: isDraftID(strength._id),\n      live: strength.live,\n      name: formattedName,\n      numExercises: strength.numExercises,\n      slug: strength.slug,\n    };\n\n    enhancedStrength.goalTemplates = Array.isArray(enhancedStrength.goalTemplates)\n      ? onlyKeepDrafts(enhancedStrength.goalTemplates.map((goal: GoalTemplate) => goal))\n      : strength.goalTemplates;\n\n    return enhancedStrength;\n  });\n\nconst formatStrengthNames = (\n  name: string,\n  isDraft: boolean,\n  verboseContent: boolean,\n  live?: Live\n): string => {\n  function liveToString({ inTeach = false, inSeeTheGood = false }) {\n    return `[${inTeach ? 'TEACH' : ''}${inTeach && inSeeTheGood ? ' & ' : ''}${\n      inSeeTheGood ? 'STG' : ''\n    }]`;\n  }\n\n  let formattedName = isDraft && verboseContent ? `${name} [DRAFT]` : name;\n  formattedName = live && verboseContent ? `${name} ${liveToString(live)}` : name;\n\n  return formattedName;\n};\n\nexport const buildStrengthPackages = ({\n  language = Language.fi,\n  audienceSlug,\n  strengths,\n}: {\n  language: Language;\n  audienceSlug?: string;\n  strengths: Strength[];\n}): { core: Strength[]; waves: Strength[][]; hasWavesContent: boolean } => {\n  if (!language || !strengths) {\n    return { core: [], waves: [], hasWavesContent: false };\n  }\n\n  const coreStrengthSlugs: StrengthSlug[] = [\n    StrengthSlug.selfRegulation,\n    StrengthSlug.perseverance,\n    StrengthSlug.kindness,\n  ];\n  const coreStrengths: Strength[] = strengths\n    .filter((s) => coreStrengthSlugs.includes(s.slug))\n    .sort((a, b) => coreStrengthSlugs.indexOf(a.slug) - coreStrengthSlugs.indexOf(b.slug));\n\n  let package1Slugs: string[],\n    package2Slugs: string[],\n    package3Slugs: string[],\n    package4Slugs: string[],\n    package5Slugs: string[],\n    package6Slugs: string[],\n    package7Slugs: string[],\n    package1: Strength[],\n    package2: Strength[],\n    package3: Strength[],\n    package4: Strength[],\n    package5: Strength[],\n    package6: Strength[],\n    package7: Strength[],\n    waves: Strength[][] = [],\n    hasWavesContent: boolean = false;\n\n  if (language === Language.fi) {\n    if (audienceSlug === 'preschool') {\n      package1Slugs = [StrengthSlug.compassion, StrengthSlug.courage, StrengthSlug.teamwork];\n      package1 = strengths.filter((s) => package1Slugs.includes(s.slug));\n\n      waves = [package1];\n      hasWavesContent = false;\n    }\n\n    if (audienceSlug === 'early_years') {\n      package1Slugs = [StrengthSlug.creativity, StrengthSlug.compassion, StrengthSlug.courage];\n      package1 = strengths.filter((s) => package1Slugs.includes(s.slug));\n\n      waves = [package1];\n      hasWavesContent = false;\n    }\n\n    if (!audienceSlug || audienceSlug === 'students-v2') {\n      package1Slugs = [StrengthSlug.compassion, StrengthSlug.courage, StrengthSlug.creativity];\n      package2Slugs = [StrengthSlug.curiosity, StrengthSlug.humour, StrengthSlug.teamwork];\n      package3Slugs = [StrengthSlug.enthusiasm, StrengthSlug.hope, StrengthSlug.socialIntelligence];\n      package4Slugs = [StrengthSlug.honesty, StrengthSlug.love, StrengthSlug.perspective];\n      package5Slugs = [StrengthSlug.fairness, StrengthSlug.leadership, StrengthSlug.loveOfLearning];\n      package6Slugs = [\n        StrengthSlug.carefulness,\n        StrengthSlug.forgiveness,\n        StrengthSlug.gratitude,\n        StrengthSlug.judgement,\n      ];\n      package7Slugs = [\n        StrengthSlug.grit,\n        StrengthSlug.loveOfBeauty,\n        StrengthSlug.modesty,\n        StrengthSlug.spirituality,\n      ];\n\n      package1 = strengths.filter((s) => package1Slugs.includes(s.slug));\n      package2 = strengths.filter((s) => package2Slugs.includes(s.slug));\n      package3 = strengths.filter((s) => package3Slugs.includes(s.slug));\n      package4 = strengths.filter((s) => package4Slugs.includes(s.slug));\n      package5 = strengths.filter((s) => package5Slugs.includes(s.slug));\n      package6 = strengths.filter((s) => package6Slugs.includes(s.slug));\n      package7 = strengths.filter((s) => package7Slugs.includes(s.slug));\n\n      waves = [package1, package2, package3, package4, package5, package6, package7];\n      hasWavesContent = true;\n    }\n  }\n\n  if (language === Language.en) {\n    if (audienceSlug && audienceSlug === 'students-v1') {\n      package1Slugs = [\n        StrengthSlug.courage,\n        StrengthSlug.creativity,\n        StrengthSlug.humour,\n        StrengthSlug.teamwork,\n        StrengthSlug.enthusiasm,\n        StrengthSlug.socialIntelligence,\n        StrengthSlug.perspective,\n      ];\n      package1 = strengths.filter((s) => package1Slugs.includes(s.slug));\n\n      waves = [package1];\n      hasWavesContent = false;\n    }\n\n    if (!audienceSlug || audienceSlug === 'students-v2') {\n      package1Slugs = [StrengthSlug.compassion, StrengthSlug.courage, StrengthSlug.creativity];\n      package2Slugs = [StrengthSlug.curiosity, StrengthSlug.humour, StrengthSlug.teamwork];\n      package3Slugs = [StrengthSlug.enthusiasm, StrengthSlug.hope, StrengthSlug.socialIntelligence];\n      package4Slugs = [StrengthSlug.honesty, StrengthSlug.love, StrengthSlug.perspective];\n      package5Slugs = [StrengthSlug.fairness, StrengthSlug.leadership, StrengthSlug.loveOfLearning];\n      package6Slugs = [\n        StrengthSlug.carefulness,\n        StrengthSlug.forgiveness,\n        StrengthSlug.gratitude,\n        StrengthSlug.judgement,\n      ];\n      package7Slugs = [\n        StrengthSlug.grit,\n        StrengthSlug.loveOfBeauty,\n        StrengthSlug.modesty,\n        StrengthSlug.spirituality,\n      ];\n\n      package1 = strengths.filter((s) => package1Slugs.includes(s.slug));\n      package2 = strengths.filter((s) => package2Slugs.includes(s.slug));\n      package3 = strengths.filter((s) => package3Slugs.includes(s.slug));\n      package4 = strengths.filter((s) => package4Slugs.includes(s.slug));\n      package5 = strengths.filter((s) => package5Slugs.includes(s.slug));\n      package6 = strengths.filter((s) => package6Slugs.includes(s.slug));\n      package7 = strengths.filter((s) => package7Slugs.includes(s.slug));\n\n      waves = [package1, package2, package3, package4, package5, package6, package7];\n      hasWavesContent = true;\n    }\n  }\n\n  return { core: coreStrengths, waves, hasWavesContent };\n};\n","import { computed, Computed } from 'easy-peasy';\n\nimport { buildStrengthPackages } from './helpers';\nimport { RequestTypeToError, RequestTypeToStatus, RequestType } from './requests';\n\nimport { IStoreModel } from 'store';\nimport { Strength, StrengthSlug } from 'types/strength';\nimport { RequestTimestampPayload } from 'types/request';\nimport { Status } from 'types/status';\nimport { findItemInArray } from 'utils/findItemInArray';\n\nexport interface IStrengthModelState {\n  activeStrength: Computed<IStrengthModelState, Strength>;\n  activeStrengthSlug?: StrengthSlug;\n  error: RequestTypeToError;\n  positiveCV?: Strength;\n  requestTimestamps: RequestTimestampPayload;\n  startingLesson?: Strength;\n  status: RequestTypeToStatus;\n  stgStrengths: Computed<IStrengthModelState, Strength[] | undefined>;\n  strengthPackages: Computed<\n    IStrengthModelState,\n    { core: Strength[]; waves: Strength[][]; hasWavesContent: boolean } | undefined,\n    IStoreModel\n  >;\n  strengthPowerPointUrl?: string;\n  strengths: Strength[];\n  teachStrengths: Computed<IStrengthModelState, Strength[] | undefined>;\n  xmasCalendar?: Strength;\n}\n\nconst state: IStrengthModelState = {\n  activeStrength: computed((state) =>\n    state.activeStrengthSlug === StrengthSlug.xmasCalendar\n      ? state.xmasCalendar\n      : state.activeStrengthSlug === StrengthSlug.positiveCV\n      ? state.positiveCV\n      : state.activeStrengthSlug &&\n        findItemInArray(state.strengths, 'slug', state.activeStrengthSlug)\n  ),\n  activeStrengthSlug: undefined,\n  error: {},\n  positiveCV: undefined,\n  requestTimestamps: { fresh: 0, stale: 0 },\n  startingLesson: undefined,\n  status: Object.keys(RequestType).reduce(\n    (status, key) => ({ ...status, [RequestType[key as RequestType]]: Status.idle }),\n    {}\n  ),\n  stgStrengths: computed((state) =>\n    state.strengths.filter((strength: Strength) => strength.live.inSeeTheGood)\n  ),\n  strengthPackages: computed(\n    [\n      (state) => state.strengths,\n      (_, storeState) => storeState.settings.language,\n      (_, storeState) => storeState.audiences.activeAudienceSlug,\n      (_, storeState) => storeState.audiences.defaultAudienceSlug,\n    ],\n    (strengths, language, activeAudienceSlug, defaultAudienceSlug) =>\n      buildStrengthPackages({\n        language: language,\n        audienceSlug: activeAudienceSlug || defaultAudienceSlug,\n        strengths,\n      })\n  ),\n  strengthPowerPointUrl: undefined,\n  strengths: [],\n  teachStrengths: computed((state) =>\n    state.strengths.filter((strength: Strength) => strength.live.inTeach)\n  ),\n  xmasCalendar: undefined,\n};\n\nexport default state;\n","import actions, { IStrengthModelActions } from './actions';\nimport listeners, { IStrengthModelListeners } from './listeners';\nimport state, { IStrengthModelState } from './state';\nimport thunks, { IStrengthModelThunks } from './thunks';\n\nexport interface IStrengthModel\n  extends IStrengthModelActions,\n    IStrengthModelListeners,\n    IStrengthModelState,\n    IStrengthModelThunks {}\n\nconst audienceModel: IStrengthModel = {\n  ...actions,\n  ...listeners,\n  ...state,\n  ...thunks,\n};\n\nexport default audienceModel;\n","import { GroupRole } from './group';\nimport { User, UserResponse } from './user';\n\nexport type Invitation = {\n  id: string;\n  email?: string;\n  group_id: string;\n  role: GroupRole;\n  status: InvitationStatus;\n  type?: InvitationType;\n  creator: User;\n};\n\nexport type InvitationResponse = {\n  ID: string;\n  Email: string;\n  Role: GroupRole;\n  Status: InvitationStatus;\n  GroupID: string;\n  Creator: UserResponse;\n  Type: InvitationType;\n};\n\nexport enum InvitationType {\n  email = 'email',\n  link = 'link',\n}\n\nexport enum InvitationStatus {\n  waiting = 'waiting',\n  accepted = 'accepted',\n}\n","import { Thunk, thunk } from 'easy-peasy';\nimport { remove } from 'lodash';\n\nimport { IStrengthModel } from './model';\nimport { fetchStrengthsQuery, strengthAttachmentQuery } from './queries';\nimport { formatStrengthsResponse } from './helpers';\nimport { FetchStrengthPayload, FetchStrengthAttachmentPayload } from './payloads';\nimport { RequestType } from './requests';\n\nimport { IStoreModel } from 'store';\nimport { RequestTimestamp } from 'types/request';\nimport { Status } from 'types/status';\nimport { StrengthResponse, Strength, AttachmentType } from 'types/strength';\n\nexport interface IStrengthModelThunks {\n  fetchStrengths: Thunk<IStrengthModel, FetchStrengthPayload, void, IStoreModel>;\n  fetchStrengthAttachment: Thunk<IStrengthModel, FetchStrengthAttachmentPayload, void, IStoreModel>;\n}\n\nconst thunks: IStrengthModelThunks = {\n  fetchStrengths: thunk(async (actions, payload, { getState, getStoreState, getStoreActions }) => {\n    if (getState().status[RequestType.fetchStrengths] !== Status.idle) return;\n\n    actions.setStatus({ type: RequestType.fetchStrengths, value: Status.loading });\n    await getStoreActions().auth.silentRefresh();\n\n    const {\n      sanity: { sanityClient, verboseContent },\n      settings: { language },\n      audiences: { defaultAudienceSlug },\n    } = getStoreState();\n\n    try {\n      const strengths: StrengthResponse[] = await sanityClient.fetch(fetchStrengthsQuery, {\n        language: payload?.language || language,\n        audienceSlug: payload?.audience || defaultAudienceSlug,\n      });\n\n      const formattedStrengths: Strength[] = formatStrengthsResponse(strengths, verboseContent);\n\n      const positiveCV: Strength | undefined = remove(\n        formattedStrengths,\n        ({ slug, numExercises }) => slug.includes('positive-cv') && numExercises\n      )[0];\n      const xmasCalendar: Strength | undefined = remove(\n        formattedStrengths,\n        ({ slug, numExercises }) => slug.includes('xmas-calendar') && numExercises\n      )[0];\n      const startingLesson: Strength | undefined = formattedStrengths.find(\n        ({ slug, numExercises }) => slug.includes('start') && numExercises\n      );\n\n      actions.setStrengths(formattedStrengths);\n      actions.setPositiveCV(positiveCV);\n      actions.setXmasCalendar(xmasCalendar);\n      actions.setStartingLesson(startingLesson);\n      actions.setError({ type: RequestType.fetchStrengths, value: undefined });\n    } catch (error) {\n      actions.setError({\n        type: RequestType.fetchStrengths,\n        value: { error, status: error.response?.status },\n      });\n    } finally {\n      actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n      actions.setStatus({ type: RequestType.fetchStrengths, value: Status.complete });\n    }\n  }),\n\n  fetchStrengthAttachment: thunk(\n    async (actions, payload, { getState, getStoreState, getStoreActions }) => {\n      if (getState().status[RequestType.fetchStrengthAttachment] !== Status.idle) return;\n\n      actions.setStatus({ type: RequestType.fetchStrengthAttachment, value: Status.loading });\n      await getStoreActions().auth.silentRefresh();\n\n      const {\n        sanity: { sanityClient },\n        settings: { language },\n        audiences: { activeAudienceSlug, defaultAudienceSlug },\n      } = getStoreState();\n      const { activeStrength } = getState();\n\n      try {\n        const attachment: { downloadUrl: string } | undefined = await sanityClient.fetch(\n          strengthAttachmentQuery,\n          {\n            language: payload?.language || language,\n            audienceSlug: payload?.audience || activeAudienceSlug || defaultAudienceSlug,\n            strengthV2Slug: payload?.strength || activeStrength?.slug,\n            type: AttachmentType.slidesPowerpoint,\n          }\n        );\n\n        /*\n        TODO:\n        When more attachment types are added, set type-specific state value (state.powerPointUrl)\n        Or have a single, generic attachmentUrl property in the state (state.attachmentUrl)\n      */\n        actions.setStrengthPowerPointUrl(attachment?.downloadUrl);\n        actions.setError({ type: RequestType.fetchStrengthAttachment, value: undefined });\n      } catch (error) {\n        actions.setError({\n          type: RequestType.fetchStrengthAttachment,\n          value: { error, status: error.response?.status },\n        });\n      } finally {\n        actions.setRequestTimestamps({ type: RequestTimestamp.fresh, value: Date.now() });\n        actions.setStatus({ type: RequestType.fetchStrengthAttachment, value: Status.complete });\n      }\n    }\n  ),\n};\n\nexport default thunks;\n","import { values } from 'lodash';\n\nimport { isDraftID } from './isDraftId';\n\nexport const onlyKeepDrafts = (data: any[]): any[] =>\n  values(\n    data.reduce((foundSlugs, obj) => {\n      const { slug } = obj;\n\n      if (foundSlugs[slug]) {\n        foundSlugs[slug] = keepDraft(foundSlugs[slug], obj);\n      } else {\n        foundSlugs[slug] = obj;\n      }\n      return foundSlugs;\n    }, {})\n  );\n\nconst hasDraftID = ({ id }: { id?: string }): boolean => isDraftID(id);\nconst keepDraft = (obj1: object, obj2: object): object => (hasDraftID(obj1) ? obj1 : obj2);\n","export const isDraftID = (id?: string): boolean => {\n  if (!id) {\n    throw new Error(\n      'isDraftID called with no id. This is likely caused by the GROQ query not including _id'\n    );\n  }\n  return id.startsWith('drafts.');\n};\n","import { Action, action } from 'easy-peasy';\n\nimport { RequestType } from './requests';\nimport { IUserModel } from './model';\nimport { User } from 'types/user';\n\nexport interface IUserModelActions {\n  setLoading: Action<IUserModel, { type: RequestType; value: boolean }>;\n  setError: Action<\n    IUserModel,\n    {\n      type: RequestType;\n      value: { error: Error; status: number } | undefined;\n    }\n  >;\n  setUser: Action<IUserModel, User | undefined>;\n}\n\nconst actions: IUserModelActions = {\n  setError: action((state, payload) => {\n    state.error[payload.type] = payload.value;\n  }),\n\n  setLoading: action((state, payload) => {\n    state.loading[payload.type] = payload.value;\n  }),\n\n  setUser: action((state, payload) => {\n    state.user = payload;\n  }),\n};\n\nexport default actions;\n","import actions, { IUserModelActions } from './actions';\nimport state, { IUserModelState } from './state';\n\nexport interface IUserModel extends IUserModelState, IUserModelActions {}\n\nconst userModel: IUserModel = {\n  ...state,\n  ...actions,\n};\n\nexport default userModel;\n","import { computed, Computed } from 'easy-peasy';\n\nimport { RequestTypeToError, RequestTypeToBool } from './requests';\nimport { User } from 'types/user';\nimport { anyLoadingValueTrue, anyErrorValueTrue } from 'utils/anyValueTrue';\n\nexport interface IUserModelState {\n  error: RequestTypeToError;\n  hasError: Computed<IUserModelState, boolean>;\n  loading: RequestTypeToBool;\n  isLoading: Computed<IUserModelState, boolean>;\n  user?: User;\n}\n\nconst state: IUserModelState = {\n  error: {},\n  hasError: computed((state) => anyErrorValueTrue(state.error)),\n  loading: {},\n  isLoading: computed((state) => anyLoadingValueTrue(state.loading)),\n  user: undefined,\n};\n\nexport default state;\n","/* TODO: Convert the models to the new error format and delete this function */\nexport const anyValueTrue = <T extends Partial<Record<string, boolean>>>(obj: T): boolean =>\n  Object.values(obj).some((v) => v);\n\nexport const anyLoadingValueTrue = <T extends Partial<Record<string, boolean>>>(obj: T): boolean =>\n  obj && Object.values(obj).some((v) => v);\n\nexport const anyErrorValueTrue = <\n  T extends Partial<Record<string, { error: Error; status: number } | undefined>>\n>(\n  obj: T\n): boolean => obj && Object.values(obj).some((v) => v);\n","import { createTypedHooks } from 'easy-peasy';\n\nimport audienceModel, { IAudienceModel } from './models/audience';\nimport authModel, { IAuthModel } from './models/auth';\nimport exerciseModel, { IExerciseModel } from './models/exercise';\nimport goalModel, { IGoalModel } from './models/goal';\nimport groupModel, { IGroupModel } from './models/group';\nimport invitationModel, { IInvitationModel } from './models/invitation';\nimport membershipModel, { IMembershipModel } from './models/membership';\nimport momentModel, { IMomentModel } from './models/moment/model';\nimport sanityModel, { ISanityModel } from './models/sanity/model';\nimport settingsModel, { ISettingsModel } from './models/settings/model';\nimport strengthModel, { IStrengthModel } from './models/strength/model';\nimport userModel, { IUserModel } from './models/user/model';\n\nconst typedHooks = createTypedHooks<IStoreModel>();\nexport const usePositiveActions = typedHooks.useStoreActions;\nexport const usePositiveState = typedHooks.useStoreState;\n\nexport interface IStoreModel {\n  audiences: IAudienceModel;\n  auth: IAuthModel;\n  exercises: IExerciseModel;\n  goals: IGoalModel;\n  groups: IGroupModel;\n  invitations: IInvitationModel;\n  memberships: IMembershipModel;\n  moments: IMomentModel;\n  sanity: ISanityModel;\n  settings: ISettingsModel;\n  strengths: IStrengthModel;\n  user: IUserModel;\n}\n\nexport const storeModel: IStoreModel = {\n  audiences: audienceModel,\n  auth: authModel,\n  exercises: exerciseModel,\n  goals: goalModel,\n  groups: groupModel,\n  invitations: invitationModel,\n  memberships: membershipModel,\n  moments: momentModel,\n  sanity: sanityModel,\n  settings: settingsModel,\n  strengths: strengthModel,\n  user: userModel,\n};\n","import { ActionCreator } from 'easy-peasy';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Language, Theme } from 'types/settings';\n\nexport const useSettingsState = () => usePositiveState((state) => state.settings);\n\nexport const useSettingsActions: () => {\n  setLanguage: ActionCreator<Language>;\n  setTheme: ActionCreator<Theme>;\n} = () => {\n  const { setLanguage, setTheme } = usePositiveActions((actions) => actions.settings);\n  return {\n    setLanguage,\n    setTheme,\n  };\n};\n","import React, { useEffect, useState } from 'react';\nimport flatten from 'flat';\nimport i18n from 'i18next';\nimport { I18nextProvider, initReactI18next } from 'react-i18next';\n\nimport LanguageContent from './content';\nimport { Language } from 'types/settings';\nimport { createLanguageContent } from './createLanguageContent';\nimport { useSettingsState } from '../../';\n\ninterface Props {\n  translations?: object;\n}\n\nconst LanguageProvider: React.FC<Props> = ({ children, translations }) => {\n  const [isInitialized, setIsInitialized] = useState<boolean>(false);\n\n  const { language } = useSettingsState();\n\n  const flatTranslations: Record<string, string> = flatten(translations || LanguageContent);\n  const resources = {\n    en: {\n      translation: {\n        ...createLanguageContent(flatTranslations, Language.en),\n      },\n    },\n    fi: {\n      translation: {\n        ...createLanguageContent(flatTranslations, Language.fi),\n      },\n    },\n  };\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    setIsInitialized(true);\n\n    i18n.use(initReactI18next).init({\n      lng: language,\n      fallbackLng: Language.fi,\n      keySeparator: false,\n      resources,\n    });\n  }, [isInitialized, setIsInitialized, i18n, initReactI18next, language, resources]);\n\n  useEffect(() => {\n    if (!language) return;\n    i18n.changeLanguage(language);\n  }, [language, i18n]);\n\n  return <I18nextProvider i18n={i18n}>{children}</I18nextProvider>;\n};\n\nexport default LanguageProvider;\n","import React from 'react';\nimport { createStore, persist, PersistConfig, StoreProvider } from 'easy-peasy';\n\nimport { Dataset } from 'types/sanity';\nimport { Environment } from 'types/settings';\nimport { IAuthModel } from 'models/auth';\nimport { IGroupModel } from 'models/group';\nimport { ISettingsModel } from 'models/settings';\nimport { IUserModel } from 'models/user';\nimport { client } from 'api';\nimport { persistConfig as groupsPersistConfig } from 'models/group/model';\nimport { persistConfig as settingsPersistConfig } from 'models/settings/model';\nimport { storeModel } from 'store';\n\ninterface IProps {\n  authModel?: IAuthModel;\n  baseUrl: string;\n  env: Environment;\n  groups?: { model: IGroupModel; persistConfig: PersistConfig<IGroupModel> };\n  sanityConfig?: ISanityProps;\n  settings?: { model: ISettingsModel; persistConfig: PersistConfig<ISettingsModel> };\n  userModel?: IUserModel;\n}\n\ninterface ISanityProps {\n  dataset?: Dataset;\n  project?: string;\n  token?: string;\n}\n\nconst PositiveProvider: React.FC<IProps> = ({\n  authModel,\n  groups,\n  baseUrl,\n  env,\n  sanityConfig,\n  settings,\n  userModel,\n  children,\n}) => {\n  client.defaults.baseURL = baseUrl;\n\n  const store = createStore(\n    {\n      ...storeModel,\n      auth: { ...storeModel.auth, ...authModel },\n      groups: persist(\n        { ...storeModel.groups, ...groups?.model },\n        { ...groupsPersistConfig, ...groups?.persistConfig }\n      ),\n      sanity: { ...storeModel.sanity, ...sanityConfig },\n      settings: persist(\n        { ...storeModel.settings, ...settings?.model, env },\n        { ...settingsPersistConfig, ...settings?.persistConfig }\n      ),\n      user: { ...storeModel.user, ...userModel },\n    },\n    { injections: { client } }\n  );\n\n  return <StoreProvider store={store}>{children}</StoreProvider>;\n};\n\nexport default PositiveProvider;\n","import { ActionCreator, ThunkCreator } from 'easy-peasy';\n\nimport { FetchAudiencesPayload } from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Audience } from 'types/audience';\n\nexport const useAudienceState = () => usePositiveState((state) => state.audiences);\n\nexport const useAudienceActions: () => {\n  fetchAudiences: ThunkCreator<FetchAudiencesPayload, Audience[]>;\n  setActiveAudienceSlug: ActionCreator<string>;\n} = () => {\n  const { fetchAudiences, setActiveAudienceSlug } = usePositiveActions(\n    (actions) => actions.audiences\n  );\n  return {\n    fetchAudiences,\n    setActiveAudienceSlug,\n  };\n};\n","import { ThunkCreator } from 'easy-peasy';\n\nimport { usePositiveActions, usePositiveState } from 'store';\n\nexport const useAuthState = () => usePositiveState((state) => state.auth);\n\nexport const useAuthActions: () => {\n  authenticate: ThunkCreator<void, void>;\n  initialize: ThunkCreator<void, void>;\n  logout: ThunkCreator<void, void>;\n} = () => {\n  const { authenticate, initialize, logout } = usePositiveActions((actions) => actions.auth);\n  return { authenticate, initialize, logout };\n};\n","import { ActionCreator, ThunkCreator } from 'easy-peasy';\n\nimport { FetchExercisesPayload, FindExercisePayload } from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Exercise } from 'types/exercise';\n\nexport const useExerciseState = () => usePositiveState((state) => state.exercises);\n\nexport const useExerciseActions: () => {\n  fetchExercises: ThunkCreator<FetchExercisesPayload, Exercise[]>;\n  findExercise: ThunkCreator<FindExercisePayload, Exercise>;\n  setActiveExerciseSlug: ActionCreator<string | undefined>;\n  setExercises: ActionCreator<Exercise[]>;\n} = () => {\n  const { fetchExercises, findExercise, setActiveExerciseSlug, setExercises } = usePositiveActions(\n    (actions) => actions.exercises\n  );\n  return {\n    fetchExercises,\n    findExercise,\n    setActiveExerciseSlug,\n    setExercises,\n  };\n};\n","import { ThunkCreator, ActionCreator } from 'easy-peasy';\n\nimport {\n  CreateGoalPayload,\n  DeleteGoalPayload,\n  EditGoalPayload,\n  FetchGoalsPayload,\n} from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Goal } from 'types/goal';\n\nexport const useGoalState = () => usePositiveState((state) => state.goals);\n\nexport const useGoalActions: () => {\n  createGoal: ThunkCreator<CreateGoalPayload, void>;\n  deleteGoal: ThunkCreator<DeleteGoalPayload, void>;\n  editGoal: ThunkCreator<EditGoalPayload, void>;\n  fetchGoals: ThunkCreator<FetchGoalsPayload, Goal[]>;\n  setFirstGoalFlag: ActionCreator<boolean>;\n} = () => {\n  const { createGoal, deleteGoal, editGoal, fetchGoals, setFirstGoalFlag } = usePositiveActions(\n    (actions) => actions.goals\n  );\n  return {\n    createGoal,\n    deleteGoal,\n    editGoal,\n    fetchGoals,\n    setFirstGoalFlag,\n  };\n};\n","import { ThunkCreator, ActionCreator } from 'easy-peasy';\n\nimport {\n  CreateGroupPayload,\n  DeleteGroupPayload,\n  EditGroupPayload,\n  FetchGroupsPayload,\n} from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Group } from 'types/group';\n\nexport const useGroupState = () => usePositiveState((state) => state.groups);\n\nexport const useGroupActions: () => {\n  createGroup: ThunkCreator<CreateGroupPayload, void>;\n  deleteGroup: ThunkCreator<DeleteGroupPayload, void>;\n  editGroup: ThunkCreator<EditGroupPayload, void>;\n  fetchGroups: ThunkCreator<FetchGroupsPayload, void>;\n  setGroups: ActionCreator<{ groups: Group[] }>;\n  setSelectedGroup: ActionCreator<Group | undefined>;\n  setSelectedGroupId: ActionCreator<string | undefined>;\n} = () => {\n  const {\n    createGroup,\n    deleteGroup,\n    editGroup,\n    fetchGroups,\n    setGroups,\n    setSelectedGroup,\n    setSelectedGroupId,\n  } = usePositiveActions((actions) => actions.groups);\n  return {\n    setSelectedGroup,\n    setSelectedGroupId,\n    createGroup,\n    deleteGroup,\n    editGroup,\n    fetchGroups,\n    setGroups,\n  };\n};\n","import { ThunkCreator } from 'easy-peasy';\n\nimport { scrubPII } from './helpers';\nimport {\n  FetchInvitationPayload,\n  FetchGroupInvitationsPayload,\n  InviteMemberPayload,\n  AcceptInvitationPayload,\n  DeleteInvitationPayload,\n  ResendInvitationPayload,\n} from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Invitation } from 'types/invitation';\n\nexport const useInvitationState = () => usePositiveState((state) => state.invitations);\n\nexport const useInvitationActions: () => {\n  acceptInvitation: ThunkCreator<AcceptInvitationPayload, void>;\n  deleteInvitation: ThunkCreator<DeleteInvitationPayload, void>;\n  fetchInvitations: ThunkCreator<FetchGroupInvitationsPayload, void>;\n  fetchInvitation: ThunkCreator<FetchInvitationPayload, void>;\n  sendInvitation: ThunkCreator<InviteMemberPayload, void>;\n  resendInvitation: ThunkCreator<ResendInvitationPayload, void>;\n  scrubPII: (invitation: Invitation) => Invitation;\n} = () => {\n  const {\n    acceptInvitation,\n    deleteInvitation,\n    fetchInvitation,\n    fetchInvitations,\n    sendInvitation,\n    resendInvitation,\n  } = usePositiveActions((actions) => actions.invitations);\n  return {\n    acceptInvitation,\n    deleteInvitation,\n    fetchInvitations,\n    fetchInvitation,\n    sendInvitation,\n    resendInvitation,\n    scrubPII,\n  };\n};\n","import { ThunkCreator } from 'easy-peasy';\n\nimport { scrubPII } from './helpers';\nimport {\n  FetchMembershipsPayload,\n  EditMembershipPayload,\n  DeleteMembershipPayload,\n} from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Membership } from 'types/membership';\n\nexport const useMembershipState = () => usePositiveState((state) => state.memberships);\n\nexport const useMembershipActions: () => {\n  deleteMembership: ThunkCreator<DeleteMembershipPayload, void>;\n  editMembership: ThunkCreator<EditMembershipPayload, void>;\n  fetchMemberships: ThunkCreator<FetchMembershipsPayload, void>;\n  scrubPII: (membership: Membership) => Membership;\n} = () => {\n  const { deleteMembership, editMembership, fetchMemberships } = usePositiveActions(\n    (actions) => actions.memberships\n  );\n  return {\n    deleteMembership,\n    editMembership,\n    fetchMemberships,\n    scrubPII,\n  };\n};\n","import { ActionCreator, ThunkCreator } from 'easy-peasy';\n\nimport {\n  CreateMomentPayload,\n  DeleteMomentPayload,\n  DeleteMomentMediaPayload,\n  EditMomentPayload,\n  FetchMomentsPayload,\n} from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Moment } from 'types/moment';\n\nexport const useMomentState = () => usePositiveState((state) => state.moments);\n\nexport const useMomentActions: () => {\n  createMoment: ThunkCreator<CreateMomentPayload, any>;\n  deleteMoment: ThunkCreator<DeleteMomentPayload, void>;\n  deleteMomentMedia: ThunkCreator<DeleteMomentMediaPayload, void>;\n  editMoment: ThunkCreator<EditMomentPayload, void>;\n  fetchMoments: ThunkCreator<FetchMomentsPayload, Moment[]>;\n  setFirstMomentFlag: ActionCreator<boolean>;\n} = () => {\n  const {\n    createMoment,\n    deleteMoment,\n    deleteMomentMedia,\n    editMoment,\n    fetchMoments,\n    setFirstMomentFlag,\n  } = usePositiveActions((actions) => actions.moments);\n  return {\n    createMoment,\n    deleteMoment,\n    deleteMomentMedia,\n    editMoment,\n    fetchMoments,\n    setFirstMomentFlag,\n  };\n};\n","import { ThunkCreator } from 'easy-peasy';\n\nimport { FetchIllustrationUrlPayload } from './payloads';\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { SanityImageSource } from 'types/sanity';\n\nexport const useSanityState = () => usePositiveState((state) => state.sanity);\n\nexport const useSanityActions: () => {\n  getImageUrlBuilder: ThunkCreator<SanityImageSource>;\n  fetchIllustrationUrl: ThunkCreator<FetchIllustrationUrlPayload, Promise<string | void | null>>;\n} = () => {\n  const { getImageUrlBuilder, fetchIllustrationUrl } = usePositiveActions(\n    (actions) => actions.sanity\n  );\n  return {\n    getImageUrlBuilder,\n    fetchIllustrationUrl,\n  };\n};\n","import { ActionCreator, ThunkCreator } from 'easy-peasy';\n\nimport { FetchStrengthPayload, FetchStrengthAttachmentPayload } from './payloads';\n\nimport { usePositiveActions, usePositiveState } from 'store';\nimport { Strength, StrengthSlug } from 'types/strength';\n\nexport const useStrengthState = () => usePositiveState((state) => state.strengths);\n\nexport const useStrengthActions: () => {\n  fetchStrengths: ThunkCreator<FetchStrengthPayload, Strength[]>;\n  fetchStrengthAttachment: ThunkCreator<FetchStrengthAttachmentPayload, string>;\n  setActiveStrengthSlug: ActionCreator<StrengthSlug | undefined>;\n  setStrengthPowerPointUrl: ActionCreator<string | undefined>;\n} = () => {\n  const {\n    fetchStrengths,\n    fetchStrengthAttachment,\n    setStrengthPowerPointUrl,\n    setActiveStrengthSlug,\n  } = usePositiveActions((actions) => actions.strengths);\n  return {\n    fetchStrengths,\n    fetchStrengthAttachment,\n    setStrengthPowerPointUrl,\n    setActiveStrengthSlug,\n  };\n};\n","import { scrubPII } from './helpers';\nimport { usePositiveState } from 'store';\n\nimport { User } from 'types/user';\n\nexport const useUserState = () => usePositiveState((state) => state.user);\n\nexport const useUserActions: () => {\n  scrubPII: (user: User) => User;\n} = () => {\n  return { scrubPII };\n};\n"],"names":["Language","Theme","Environment","app","actions","activate_tips","en","fi","cancel","confirm","edit","got_it","locale","login","log_in","logout","log_out","save","save_changes","submitting","arrow","confirmations","ask_discard_changes","discard_changes","discard_msg","crow_tip","email","example","errors","content_unavailable","footer","happy_kids_learn_best","menus","account_settings","family_name","given_name","your_name","msg","main","contact_support","language","sanity_remarks_off","sanity_remarks_on","tips","dismiss_toast","reset_toast","today","token","request_1","request_2","request","instructions","success","type","videos","yesterday","resources","download_pdf","book","cards","see_the_good_activity_cards","desc","url","see_the_good_student_cards","route","invitation","join_group","sign_up","already_invited","failed_to_send","invitation_not_found","invitation_not_found_msg","existing_account","header","message","invitations","status","accepted","waiting","welcome_to_the_group","landing","learn","see_the_good","teach","video_url","welcome_msg","unknown","user_not_found","welcome_message","next","articles","num_videos","attach_media","cancel_invitation","change_role","create","group","delete","moment","photo","post","invite","multiple","new_member","leave","remove","from_group","select_group","spot_strength","msg_1","msg_2","downgrade_role","leave_group","memberships","create_group","canceling_invitation","fetching_group_invitations","fetching_group_members","invalid_email","invalid_group","invalid_input_length","member_already_exists","updating_membership","updating_user","feed","first_moment_tip","from","name","tip_1","tip_2","manage_organization","member_role","members","menu","insights","modal","edit_post","step_1","power_strengths","more_strengths","step_2","examples","moments","no_group_selected","no_groups","group_name","page_title","placeholder","tip","no_moments","sub_heading","watch_video","only_group_manager","organization","other_groups","plus_others","progress","roles","class","manager","spotter","viewer","more_coming_soon","member","strengths","to","your_groups","download_ppt","duration","exercise","additional_exercises","additional_exercises_preschool","basics","basics_preschool","lesson","part","project","whole","homework","individual","pair","small_group","teacher","xmas_doors","exercises","find_lesson_plans","how_to_find_strengths","teach_character_strengths","teacher_guide","wave_of_strengths","wave","waves_desc","Path","RequestType","createLanguageContent","data","lang","langLength","length","Object","keys","filter","key","slice","reduce","obj","apiBaseUrl","process","env","REACT_APP_API_BASE_URL","cache","setupCache","maxAge","clearOnStale","readOnError","invalidate","config","clearCacheEntry","store","removeItem","uuid","client","axios","baseURL","withCredentials","headers","Content-Type","adapter","interceptors","response","use","res","error","Error","GroupType","GroupRole","formatName","givenName","familyName","Boolean","join","scrubPII","user","id","formatMembershipResponse","membership","ID","FamilyName","GivenName","role","Role","scrubUserPII","formatInvitationResponse","Email","Status","group_id","GroupID","creator","Creator","_invitation$Creator","_invitation$Creator2","_invitation$Creator3","_invitation$Creator4","_invitation$Creator5","Type","isOrphanClass","g","isClass","parentGroup","isOrg","formatGroupsResponse","groups","map","Name","userRole","UserRole","ParentGroup","undefined","sort","a","b","nameA","toUpperCase","nameB","RequestTimestamp","state","hasSelectableGroups","computed","orphanGroups","nameMaxLength","nameMinLength","organizations","restrictedAccount","hasOrganizations","managerOnly","filterOrganizations","requestTimestamps","fresh","stale","selectedGroup","selectedGroupId","idle","setError","action","payload","value","setGroups","setRequestTimestamps","setSelectedGroup","setSelectedGroupId","setStatus","thunks","createGroup","thunk","getState","getStoreActions","injections","loading","auth","silentRefresh","parentGroupId","groupId","then","newGroup","updatedGroups","concat","_error$response","Date","now","complete","deleteGroup","_error$response2","editGroup","put","_error$response3","fetchGroups","get","Array","isArray","childGroups","_error$response4","listeners","onSetGroups","thunkOn","find","onSetSelectedGroupId","target","getStoreState","activeGroup","isManager","fetchMemberships","fetchInvitations","Promise","all","goals","model","onSetStatus","persistConfig","storage","allow","groupModel","Locales","theme","light","development","setLanguage","setTheme","onSetLanguage","_","__","audiences","setRawAudiences","setActiveAudienceSlug","setExercises","setStrengths","setPositiveCV","setXmasCalendar","setStartingLesson","setAudiences","enUS","settingsModel","activeAudienceSlug","rawAudiences","defaultAudiences","findItemInArray","item","activeAudience","defaultAudienceSlug","storeState","settings","fetchAudiences","sanityClient","sanity","fetch","formattedAudiences","audience","_id","live","slug","numExercises","formatAudiencesResponse","productionAudiences","production","startsWith","filterProductionAudiences","audienceModel","persist","setIdToken","idToken","setIdTokenExpiresAt","idTokenExpiresAt","setIsInitialized","isInitialized","setRequest","setSessionExpiresAt","sessionExpiresAt","ExerciseSectionTitle","ExerciseSectionKey","idTokenExpiresIn","Math","floor","sessionExpiresIn","authModel","authenticate","console","log","initialize","postIdToken","session","Authorization","userResponse","setUser","refresh","requestCode","requestTokens","setActiveExerciseSlug","activeExerciseSlug","isDraftID","activeExercise","exerciseSections","exercisesBySection","groupBy","section","forTeacher","firstLesson","additionalExercises","quickExercises","christmasCalendar","fetchExercises","verboseContent","activeStrength","strengthSlug","audienceSlug","formattedExercises","isDraft","formattedExercise","title","formatExercisesResponse","findExercise","exerciseModel","setFirstGoalFlag","firstGoalFlag","setGoals","formatGoalResponse","goal","modifiedAt","ModifiedAt","createdAt","CreatedAt","actTargetCount","ActTargetCount","creatorId","CreatorID","actTemplates","ActTemplates","_goal$ActTemplates","template","text","Text","StrengthSlug","goalModel","createGoal","createdGoal","deleteGoal","goalId","updatedGoals","editGoal","editedGoal","findIndex","fetchGoals","setGroupInvitations","setInvitation","onSetGroupInvitations","updatedGroup","acceptInvitation","invitationId","deleteInvitation","updatedInvitations","i","fetchInvitation","requestToken","tokenSource","CancelToken","source","cancelToken","sendInvitation","invitationType","_error$response5","resendInvitation","_error$response6","invitationModel","setMemberships","onSetMemberships","deleteMembership","memberId","updatedMemberships","m","editMembership","editIndex","membershipModel","setCursor","cursor","setFirstMomentFlag","firstMomentFlag","setMoments","setTempMoments","tempMoments","moreMomentsExist","formatSingleMomentResponse","creatorName","description","Description","groupName","Group","mediaId","MediaID","mediaType","MediaType","mediaUrl","getMediaUrl","GoalID","media","createMoment","createMomentMedia","blob","includes","getMediaType","tempMomentIndex","updatedTemp","formData","FormData","append","momentId","onUploadProgress","progressEvent","progressTemp","round","loaded","total","MomentID","uploaderId","UploaderID","tmp","splice","deleteMoment","updatedMoments","momentIndex","deleteMomentMedia","editMoment","fetchMoments","fetchRequestType","resetCursor","fetchMoreMoments","count","isCacheStale","momentResponse","formatMomentsResponse","Items","Cursor","Dataset","IllustrationSlug","momentModel","AttachmentType","dataset","projectId","useCdn","ignoreBrowserTokenWarning","setDataset","setVerboseContent","fetchIllustrationUrl","sanityIllustration","getImageUrlBuilder","width","height","imageUrl","ImageURLBuilder","image","sanityModel","setActiveStrengthSlug","activeStrengthSlug","positiveCV","startingLesson","setStrengthPowerPointUrl","strengthPowerPointUrl","xmasCalendar","formatStrengthNames","inTeach","inSeeTheGood","stgStrengths","strength","strengthPackages","core","waves","hasWavesContent","package1Slugs","package2Slugs","package3Slugs","package4Slugs","package5Slugs","package6Slugs","package7Slugs","coreStrengthSlugs","selfRegulation","perseverance","kindness","coreStrengths","s","indexOf","compassion","courage","teamwork","creativity","curiosity","humour","enthusiasm","hope","socialIntelligence","honesty","love","perspective","fairness","leadership","loveOfLearning","carefulness","forgiveness","gratitude","judgement","grit","loveOfBeauty","modesty","spirituality","buildStrengthPackages","teachStrengths","InvitationType","InvitationStatus","fetchStrengths","formattedStrengths","formattedName","enhancedStrength","color","backgroundColor","goalTemplates","goalText","imageAsset","values","foundSlugs","obj1","obj2","formatStrengthsResponse","fetchStrengthAttachment","strengthV2Slug","slidesPowerpoint","attachment","downloadUrl","setLoading","userModel","hasError","some","v","isLoading","typedHooks","createTypedHooks","usePositiveActions","useStoreActions","usePositiveState","useStoreState","storeModel","strengthModel","useSettingsState","children","translations","useState","flatTranslations","flatten","LanguageContent","translation","useEffect","i18n","initReactI18next","init","lng","fallbackLng","keySeparator","changeLanguage","React","I18nextProvider","sanityConfig","defaults","baseUrl","createStore","groupsPersistConfig","settingsPersistConfig","StoreProvider"],"mappings":"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"}